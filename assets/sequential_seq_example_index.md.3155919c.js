import{_ as s,c as n,o as a,a as l}from"./app.cdbf6830.js";const F=JSON.parse('{"title":"Examples of Synthesizing Behavioral Code to a Specific Structure","description":"","frontmatter":{},"headers":[{"level":2,"title":"Brief","slug":"brief","link":"#brief","children":[]},{"level":2,"title":"Schematics","slug":"schematics","link":"#schematics","children":[]},{"level":2,"title":"ENTITY  example","slug":"entity-example","link":"#entity-example","children":[]},{"level":2,"title":"ARCH  ARCH1 of example","slug":"arch-arch1-of-example","link":"#arch-arch1-of-example","children":[]},{"level":2,"title":"ARCH  ARCH2 of example","slug":"arch-arch2-of-example","link":"#arch-arch2-of-example","children":[]},{"level":2,"title":"ARCH  ARCH2_2 of example","slug":"arch-arch2-2-of-example","link":"#arch-arch2-2-of-example","children":[]},{"level":2,"title":"ARCH  ARCH3 of example","slug":"arch-arch3-of-example","link":"#arch-arch3-of-example","children":[]},{"level":2,"title":"ARCH  ARCH3_2 of example","slug":"arch-arch3-2-of-example","link":"#arch-arch3-2-of-example","children":[]},{"level":2,"title":"ARCH  ARCH3_2008 of example","slug":"arch-arch3-2008-of-example","link":"#arch-arch3-2008-of-example","children":[]},{"level":2,"title":"ARCH  ARCH4 of example","slug":"arch-arch4-of-example","link":"#arch-arch4-of-example","children":[]},{"level":2,"title":"ARCH  ARCH4_2 of example","slug":"arch-arch4-2-of-example","link":"#arch-arch4-2-of-example","children":[]},{"level":2,"title":"ARCH  ARCH4_3 of example","slug":"arch-arch4-3-of-example","link":"#arch-arch4-3-of-example","children":[]},{"level":2,"title":"ARCH  ARCH5 of example","slug":"arch-arch5-of-example","link":"#arch-arch5-of-example","children":[]},{"level":2,"title":"ARCH  ARCH5_2 of example","slug":"arch-arch5-2-of-example","link":"#arch-arch5-2-of-example","children":[]},{"level":2,"title":"ARCH  ARCH6 of example","slug":"arch-arch6-of-example","link":"#arch-arch6-of-example","children":[]},{"level":2,"title":"ARCH  ARCH6_2 of example","slug":"arch-arch6-2-of-example","link":"#arch-arch6-2-of-example","children":[]},{"level":2,"title":"ENTITY  seq_example","slug":"entity-seq-example","link":"#entity-seq-example","children":[]},{"level":2,"title":"ARCH  default_arch of seq_example","slug":"arch-default-arch-of-seq-example","link":"#arch-default-arch-of-seq-example","children":[]}],"relativePath":"sequential/seq_example/index.md"}'),o={name:"sequential/seq_example/index.md"},p=l(`<h1 id="examples-of-synthesizing-behavioral-code-to-a-specific-structure" tabindex="-1">Examples of Synthesizing Behavioral Code to a Specific Structure <a class="header-anchor" href="#examples-of-synthesizing-behavioral-code-to-a-specific-structure" aria-hidden="true">#</a></h1><details class="details custom-block"><summary>Get source code for this page</summary><div style="display:flex;flex-direction:row;"><a href="data:text/plain;charset=utf-8,--%20Greg%20Stitt%0A--%20University%20of%20Florida%0A%0A--%20This%20example%20demonstrates%20how%20synthesis%20tools%20convert%20sequential%20logic%0A--%20descriptions%20into%20a%20circuit.%20There%20is%20one%20rule%20that%20is%20critically%20important%0A--%20to%20remember%3A%0A--%0A--%20If%20you%20assign%20a%20signal%20(which%20also%20includes%20outputs)%20on%20a%0A--%20rising%20clock%20edge%2C%20the%20synthesis%20tool%20will%20infer%20a%20register.%0A--%0A--%20It%20is%20common%20to%20accidentally%20introduce%20registers%20by%20assigning%20signals%20on%20a%0A--%20rising%20clock.%20Always%20keep%20in%20mind%20exactly%20how%20many%20registers%20you%20want.%20If%0A--%20you%20have%20to%20assign%20a%20signal%20and%20you%20don&#39;t%20want%20it%20to%20become%20a%20register%2C%20you%0A--%20have%20to%20assign%20it%20outside%20of%20the%20process%20used%20for%20sequential%20logic.%20Do%20not%0A--%20simply%20move%20it%20outside%20the%20rising%20clock%20elsif%20in%20the%20same%20process.%20This%0A--%20violates%20my%20synthesis%20guidelines%20for%20sequential%20logic.%20If%20you%20don&#39;t%20want%20a%0A--%20register%20on%20a%20particular%20assignment%2C%20that%20means%20that%20the%20assignment%0A--%20corresponds%20to%20an%20output%20of%20combinational%20logic.%20You%20should%20therefore%20move%0A--%20the%20assignment%20into%20concurrent%20statements%2C%20or%20a%20separate%20process%20that%0A--%20follows%20my%20guidelines%20for%20combinational%20logic.%0A%0A--%20INSTRUCTIONS%3A%20Please%20see%20architectures.pdf%20for%20the%20corresponding%20schematic%0A--%20of%20each%20of%20the%20following%20architectures.%20Also%2C%20use%20top_level.vhd%20to%0A--%20synthesize%20each%20architecture%20separately%2C%20so%20you%20can%20confirm%20the%20synthesize%0A--%20circuit%20matches%20the%20circuit%20in%20the%20pdf.%0A%0A%0Alibrary%20ieee%3B%0Ause%20ieee.std_logic_1164.all%3B%0Ause%20ieee.numeric_std.all%3B%0A%0Aentity%20example%20is%0A%20%20%20%20generic(%0A%20%20%20%20%20%20%20%20WIDTH%20%3A%20positive)%3B%0A%20%20%20%20port%20(%0A%20%20%20%20%20%20%20%20clk%20%20%3A%20in%20%20std_logic%3B%0A%20%20%20%20%20%20%20%20rst%20%20%3A%20in%20%20std_logic%3B%0A%20%20%20%20%20%20%20%20in1%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20in2%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20in3%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20out1%20%3A%20out%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20out2%20%3A%20out%20std_logic_vector(WIDTH-1%20downto%200))%3B%0Aend%20example%3B%0A%0A%0Aarchitecture%20ARCH1%20of%20example%20is%0Abegin%0A%20%20%20%20--%20Note%20that%20despite%20having%20combinational%20logic%20in%20the%20architecture%2C%20we%20are%0A%20%20%20%20--%20still%20using%20the%20sequential%20logic%20guidelines%2C%20which%20can%20apply%20to%20any%0A%20%20%20%20--%20circuit%20that%20contains%20sequential%20logic.%20There%20are%20a%20few%20exceptions%2C%0A%20%20%20%20--%20which%20I%20will%20demonstrate%20in%20ARCH3.%0A%20%20%20%20%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20For%20this%20example%2C%20assume%20that%20all%20registers%20should%20be%20reset%20to%200.%0A%20%20%20%20%20%20%20%20%20%20%20%20out1%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20Assigning%20a%20signal%20on%20a%20rising%20clock%20edge%20creates%20a%20register%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20so%20this%20one%20line%20of%20code%20will%20instantiate%20the%20adder%20and%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20register%20for%20out1%0A%20%20%20%20%20%20%20%20%20%20%20%20out1%20%3C%3D%20std_logic_vector(unsigned(in1)%20%2B%20unsigned(in2))%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20Assigning%20out2%20on%20a%20rising%20clock%20creates%20the%20second%20register%20and%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20connects%20it%20to%20in3.%0A%20%20%20%20%20%20%20%20%20%20%20%20out2%20%3C%3D%20in3%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0Aend%20ARCH1%3B%0A%0A%0Aarchitecture%20ARCH2%20of%20example%20is%0A%0A%20%20%20%20--%20ARCH2%20has%20two%20registers%20not%20connected%20to%20outputs%2C%20which%20each%20require%20an%0A%20%20%20%20--%20internal%20signal.%0A%20%20%20%20--%0A%20%20%20%20--%20NAMING%20CONVENTION%3A%20For%20any%20internal%20signal%20that%20is%20a%20register%2C%20I%20use%0A%20%20%20%20--%20a%20_r%20suffix.%20I%20make%20an%20exception%20for%20outputs%20because%20I%20generally%20don&#39;t%0A%20%20%20%20--%20expose%20implementation%20details%20on%20the%20port%2C%20and%20there%20are%20situations%0A%20%20%20%20--%20where%20an%20output%20may%20or%20may%20not%20be%20registered%20based%20on%20different%0A%20%20%20%20--%20conditions.%20In%20situations%2C%20to%20ensure%20that%20every%20register%20has%20a%20_r%20suffix%2C%0A%20%20%20%20--%20I%20will%20create%20an%20additional%20internal%20signal%20with%20the%20output%20name%20and%20_r%0A%20%20%20%20--%20suffix.%20I%20will%20then%20simply%20do%20a%20concurrent%20assignment%20of%20the%20_r%20version%0A%20%20%20%20--%20to%20the%20actual%20output.%0A%20%20%20%20--%0A%20%20%20%20--%20Another%20naming%20convention%20that%20I%20like%20is%20to%20use%20a%20_q%20suffix%20on%20a%20register%0A%20%20%20%20--%20output%2C%20and%20a%20_d%20suffix%20for%20register%20inputs.%20There%20is%20a%20lot%20I%20like%20about%0A%20%20%20%20--%20this%20convention%2C%20but%20I%20haven&#39;t%20adopted%20it%20for%20several%20reasons.%20First%2C%0A%20%20%20%20--%20my%20register%20inputs%20often%20come%20directly%20from%20other%20signals%2C%20so%20I%20don&#39;t%0A%20%20%20%20--%20want%20to%20introduce%20an%20extra%20_d%20signal.%20However%2C%20I&#39;ve%20found%20it%20can%20be%20very%0A%20%20%20%20--%20useful%20for%202-process%20FSMD%20examples%2C%20which%20are%20explained%20later.%0A%20%20%20%20%0A%20%20%20%20signal%20in1_r%2C%20in2_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20out1%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20Rest%20the%20new%20registers%20the%20same%20way%20as%20before.%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20For%20ARCH2%2C%20in1%20and%20in2%20each%20pass%20through%20a%20register%20before%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20being%20added.%20We%20can%20add%20these%20registers%20by%20simply%20assigning%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20corresponding%20signals%20on%20the%20rising%20clock%20edge%2C%20which%20will%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20synthesize%20two%20registers.%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%3C%3D%20in2%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20The%20remainder%20of%20the%20circuit%20stays%20the%20same%2C%20with%20the%20exception%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20of%20the%20adder%20inputs%20now%20coming%20from%20the%20two%20new%20registers.%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20out1%20%3C%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2%20%3C%3D%20in3%3B%0A%0A%20%20%20%20%20%20%20%20--%20IMPORTANT%3A%0A%20%20%20%20%20%20%20%20--%20Note%20that%20the%20order%20of%20these%20statements%20(despite%20being%0A%20%20%20%20%20%20%20%20--%20sequential%20statements)%20does%20not%20affect%20the%20functionality%20or%20the%0A%20%20%20%20%20%20%20%20--%20synthesized%20circuit.%20It%20is%20important%20to%20remember%20that%20signals%0A%20%20%20%20%20%20%20%20--%20are%20only%20updated%20at%20the%20end%20of%20the%20process%20(technically%20at%20the%20next%0A%20%20%20%20%20%20%20%20--%20step)%2C%20so%20the%20addition%20operation%20will%20always%20use%20the%20previous%20value%0A%20%20%20%20%20%20%20%20--%20of%20in1_r%20and%20in2_r%20regardless%20of%20the%20ordering%20of%20statements.%0A%20%20%20%20%20%20%20%20--%20In%20fact%2C%20this%20behavior%20matches%20the%20one-cycle%20delay%20introduced%20by%0A%20%20%20%20%20%20%20%20--%20the%20two%20input%20registers%2C%20which%20is%20exactly%20what%20we%20want.%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0Aend%20ARCH2%3B%0A%0A%0Aarchitecture%20ARCH2_2%20of%20example%20is%0A%0A%20%20%20%20--%20In%20this%20version%20of%20ARCH2%2C%20we%20create%20explicit%20signals%20for%20the%20two%20output%0A%20%20%20%20--%20registers%20to%20ensure%20all%20registers%20are%20explicit.%0A%20%20%20%20signal%20in1_r%2C%20in2_r%2C%20out1_r%2C%20out2_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%3C%3D%20in2%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20Here%20we%20assign%20the%20_r%20version%20of%20the%20outputs.%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20in3%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0A%0A%20%20%20%20--%20This%20concurrent%20assignemnt%20connects%20the%20explicit%20registers%20to%20the%0A%20%20%20%20--%20outputs.%20This%20code%20synthesized%20to%20the%20exact%20same%20circuit.%20I%20used%20to%0A%20%20%20%20--%20avoid%20this%20strategy%2C%20but%20have%20come%20to%20appreciate%20it%20more%20for%20complex%0A%20%20%20%20--%20entities%2C%20especially%20when%20doing%20timing%20optimization.%0A%0A%20%20%20%20out1%20%3C%3D%20out1_r%3B%0A%20%20%20%20out2%20%3C%3D%20out2_r%3B%0A%20%20%20%20%0Aend%20ARCH2_2%3B%0A%0A%0Aarchitecture%20ARCH3%20of%20example%20is%0A%0A%20%20%20%20signal%20in1_r%2C%20in2_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20--%20Input%203%20now%20needs%20a%20register%20signal%20(in3_r)%20because%20unlike%20the%20previous%0A%20%20%20%20--%20architecture%2C%20that%20register%20no%20longer%20connects%20to%20an%20output.%0A%20%20%20%20signal%20in3_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20--%20The%20register%20on%20the%20output%20of%20the%20adder%20(add_out1_r)%20now%20requires%20an%0A%20%20%20%20--%20internal%20signal.%20Despite%20still%20connecting%20directly%20to%20output%20out1%2C%20the%0A%20%20%20%20--%20register%20also%20connects%20to%20another%20register%20(add_out2_r).%20To%20achieve%20this%2C%0A%20%20%20%20--%20we%20either%20need%20to%20be%20able%20to%20read%20from%20out1%20(not%20possible%20in%20VHDL%201993)%2C%0A%20%20%20%20--%20or%20we%20need%20a%20separate%20signal%20for%20the%20register.%0A%20%20%20%20signal%20add_out1_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20--%20Register%20add_out2_r%20does%20not%20solely%20connect%20to%20an%20output%2C%20and%20therefore%0A%20%20%20%20--%20needs%20an%20internal%20signal.%0A%20%20%20%20signal%20add_out2_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20Note%20that%20we%20no%20longer%20initialize%20out1%20and%20out2%20here%2C%20because%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20they%20no%20longer%20correspond%20to%20registers.%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20Initialize%20all%20signals%20that%20correspond%20to%20registers.%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%20%20%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%20%20%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%20%20%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20add_out1_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20add_out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%3C%3D%20in2%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20Create%20the%20register%20for%20in3%20(in3_r)%2C%20which%20is%20required%20in%20this%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20architecture%20because%20it%20does%20not%20connect%20to%20an%20output.%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%3C%3D%20in3%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20The%20add%20operation%20from%20the%20previous%20architectures%20is%20now%20stored%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20in%20register%20add_out1_r.%20Even%20though%20add_out1_r%20connects%20to%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20output%20out1%2C%20it%20also%20connects%20to%20add_out2_r%2C%20which%20requires%20an%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20internal%20signal.%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20A%20common%20mistake%20is%20to%20assign%20the%20add%20to%20out1%2C%20which%20creates%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20one%20register.%20However%2C%20there%20is%20no%20way%20to%20read%20from%20out1%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20(in%20VHDL%201993)%20because%20it%20is%20an%20output.%20I%20often%20then%20see%20people%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20converting%20out1%20to%20inout%20or%20buffer%2C%20but%20do%20not%20do%20that%20as%20a%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20workaround.%20That%20will%20synthesize%20to%20a%20different%20circuit%2C%20unless%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20you%20know%20exactly%20what%20you%20are%20doing.%0A%20%20%20%20%20%20%20%20%20%20%20%20--%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20VHDL%202008%20enables%20reading%20from%20outputs%2C%20which%20could%20eliminate%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20this%20extra%20add_out1_r%20signal.%0A%20%20%20%20%20%20%20%20%20%20%20%20add_out1_r%20%3C%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20Create%20the%20second%20register%20on%20the%20output%20of%20the%20adder.%0A%20%20%20%20%20%20%20%20%20%20%20%20add_out2_r%20%3C%3D%20add_out1_r%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0A%0A%20%20%20%20--%20To%20avoid%20creating%20an%20additional%20register%20for%20out1%2C%20we%20assign%20out1%20as%20a%0A%20%20%20%20--%20concurrent%20statement%20instead%20of%20on%20the%20rising%20clock%20edge.%0A%20%20%20%20out1%20%3C%3D%20add_out1_r%3B%0A%0A%20%20%20%20--%20Similarly%2C%20we%20assign%20out2%20as%20a%20concurrent%20statement%20to%20avoid%20an%20extra%0A%20%20%20%20--%20register.%0A%20%20%20%20out2%20%3C%3D%20std_logic_vector(unsigned(add_out2_r)%20%2B%20unsigned(in3_r))%3B%0A%0A--%20COMMON%20MISTAKE%3A%20accidentally%20assigning%20out1%20and%20out2%20inside%20the%20process%0A--%20is%20very%20common%2C%20which%20results%20in%20a%20different%20synthesized%20circuit.%20In%20the%0A--%20best%20case%2C%20this%20mistake%20just%20adds%20extra%20registers.%20However%2C%20those%20extra%0A--%20registers%20introduce%20timing%20delays%20which%20very%20often%20cause%20the%20rest%20of%0A--%20your%20circuit%20to%20stop%20working.%20%20%20%20%0Aend%20ARCH3%3B%0A%0A%0Aarchitecture%20ARCH3_2%20of%20example%20is%0A%0A%20%20%20%20signal%20in1_r%2C%20in2_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20in3_r%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20add_out1_r%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20add_out2_r%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%20%20%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%20%20%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%20%20%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20add_out1_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20add_out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%20%20%20%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%20%20%20%20%3C%3D%20in2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%20%20%20%20%3C%3D%20in3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20add_out1_r%20%3C%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20add_out2_r%20%3C%3D%20add_out1_r%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0A%0A%20%20%20%20--%20Since%20the%20code%20outside%20the%20process%20is%20all%20combinational%20logic%2C%20we%20can%0A%20%20%20%20--%20alternatively%20use%20any%20code%20that%20synthesizes%20to%20combinational%20logic.%0A%20%20%20%20--%20For%20example%2C%20we%20could%20have%20use%20a%20separate%20process%20as%20shown%20below%2C%20while%0A%20%20%20%20--%20making%20sure%20to%20follow%20all%20synthesis%20coding%20guidelines%20for%20combinational%0A%20%20%20%20--%20logic.%0A%20%20%20%20--%0A%20%20%20%20--%20A%20process%20is%20overkill%20for%20this%20simple%20example%2C%20but%20if%20the%20combinational%0A%20%20%20%20--%20logic%20gets%20complex%20enough%2C%20it%20is%20quite%20common%20to%20have%20a%20process%20for%0A%20%20%20%20--%20sequential%20logic%20and%20a%20process%20for%20combinational%20logic.%20In%20fact%2C%20you%0A%20%20%20%20--%20could%20have%20multiple%20processes.%20For%20example%2C%20since%20out1%20and%20out2%20don&#39;t%0A%20%20%20%20--%20share%20any%20inputs%2C%20it%20might%20make%20sense%20to%20have%20a%20process%20for%20each.%20Again%2C%0A%20%20%20%20--%20for%20this%20simple%20example%2C%20that%20would%20be%20overkill%2C%20but%20if%20each%20output%20had%0A%20%20%20%20--%20complex%20logic%2C%20a%20process%20for%20each%20could%20be%20appropriate.%20When%20using%0A%20%20%20%20--%20many%20processes%2C%20it%20is%20a%20good%20idea%20to%20give%20them%20a%20meaningful%20label%0A%20%20%20%20--%20to%20make%20the%20purpose%20explicit.%20Also%2C%20this%20makes%20it%20easier%20to%20find%0A%20%20%20%20--%20variables%20in%20simulators%20because%20if%20you%20don&#39;t%20give%20a%20process%20a%20name%2C%0A%20%20%20%20--%20the%20tool%20with%20generator%20a%20random%20one%20for%20you.%20Searching%20through%20randomly%0A%20%20%20%20--%20named%20processes%20for%20a%20specific%20variable%20can%20be%20annoying.%0A%0A%20%20%20%20process(add_out1_r%2C%20add_out2_r%2C%20in3_r)%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20out1%20%3C%3D%20add_out1_r%3B%0A%20%20%20%20%20%20%20%20out2%20%3C%3D%20std_logic_vector(unsigned(add_out2_r)%20%2B%20unsigned(in3_r))%3B%0A%20%20%20%20end%20process%3B%0A%20%20%20%20%0Aend%20ARCH3_2%3B%0A%0A%0A--%20The%20following%20architectures%20illustrates%20a%20slightl%20simplifications%20from%0A--%20reading%20from%20an%20output%2C%20which%20is%20only%20possible%20in%20VHDL%202008.%20Uncomment%0A--%20if%20you%20tool%20supports%20VHDL%202008.%0A%0Aarchitecture%20ARCH3_2008%20of%20example%20is%0A%0A%20%20%20signal%20in1_r%2C%20in2_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20signal%20in3_r%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20--%20We%20no%20longer%20need%20add_out1_r%20in%20this%20version.%0A%20%20%20signal%20add_out2_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0Abegin%0A%20%20%20process(clk%2C%20rst)%0A%20%20%20begin%0A%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%20%20%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%20%20%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%20%20%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20add_out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%0A%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%0A%20%20%20%20%20%20%20%20%20%20%20in1_r%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20in2_r%20%3C%3D%20in2%3B%0A%20%20%20%20%20%20%20%20%20%20%20in3_r%20%3C%3D%20in3%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20--%20In%20this%20version%2C%20we%20assign%20out1%2C%20since%20it%20is%20registered.%0A%20%20%20%20%20%20%20%20%20%20%20out1%20%3C%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20--%20VHDL%202008%20allows%20us%20to%20read%20from%20outputs%2C%20so%20this%20functionality%0A%20%20%20%20%20%20%20%20%20%20%20--%20replaces%20the%20need%20for%20the%20previous%20add_out1_r.%0A%20%20%20%20%20%20%20%20%20%20%20--%0A%20%20%20%20%20%20%20%20%20%20%20--%20For%20this%20example%2C%20I%20personally%20prefer%20the%20previous%20architecture.%0A%20%20%20%20%20%20%20%20%20%20%20--%20In%20the%20previous%20version%20the%20exact%20registers%20are%20more%20obvious.%0A%20%20%20%20%20%20%20%20%20%20%20--%20However%2C%20they%20both%20synthesize%20to%20the%20same%20circuit.%0A%20%20%20%20%20%20%20%20%20%20%20add_out2_r%20%3C%3D%20out1%3B%0A%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20end%20process%3B%0A%0A%20%20%20out2%20%3C%3D%20std_logic_vector(unsigned(add_out2_r)%20%2B%20unsigned(in3_r))%3B%0A%0Aend%20ARCH3_2008%3B%0A%0A%0Aarchitecture%20ARCH4%20of%20example%20is%0A%0A%20%20%20%20signal%20in1_r%2C%20in2_r%2C%20in3_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20--%20These%20aren&#39;t%20necessary%2C%20but%20make%20the%20output%20registers%20more%20explicit.%0A%20%20%20%20signal%20out1_r%2C%20out2_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20--%20Note%20that%20these%20signal%20do%20not%20have%20a%20_r%20suffix%20because%20they%20are%20not%0A%20%20%20%20--%20registered.%20We%20could%20potentially%20register%20the%20multiplier%20output%20and%20the%0A%20%20%20%20--%20slice%20it%20to%20form%20the%20output%2C%20but%20this%20version%20more%20closely%20matches%20the%0A%20%20%20%20--%20figure%2C%20which%20has%20a%20separate%20register%20on%20each%20output.%0A%20%20%20%20signal%20mult_out%20%3A%20std_logic_vector(WIDTH*2-1%20downto%200)%3B%0A%20%20%20%20signal%20add_out%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20Note%20that%20we%20are%20only%20assigning%20registers%20here.%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20in2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%3C%3D%20in3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20mult_out(2*WIDTH-1%20downto%20WIDTH)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20mult_out(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0A%0A%20%20%20%20--%20Combinational%20logic.%0A%20%20%20%20add_out%20%20%3C%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%20%20%20%20mult_out%20%3C%3D%20std_logic_vector(unsigned(add_out)%20*%20unsigned(in3_r))%3B%0A%0A%20%20%20%20--%20These%20aren&#39;t%20necessary%2C%20but%20are%20useful%20for%20consistently%20having%20a%20_r%0A%20%20%20%20--%20signal%20for%20every%20register.%20We%20could%20have%20just%20assigned%20out1%20and%20out2%0A%20%20%20%20--%20inside%20the%20process.%0A%20%20%20%20out1%20%3C%3D%20out1_r%3B%0A%20%20%20%20out2%20%3C%3D%20out2_r%3B%0A%20%20%20%20%0Aend%20ARCH4%3B%0A%0A%0A--%20This%20next%20architecture%20is%20a%20variation%20of%20the%20previous%20one%20that%20uses%20variables%0A--%20create%20the%20combinational%20logic%20in%20the%20same%20process%20as%20the%20registers.%0A%0Aarchitecture%20ARCH4_2%20of%20example%20is%0A%0A%20%20%20%20signal%20in1_r%2C%20in2_r%2C%20in3_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20out1_r%2C%20out2_r%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20%20%20%20%20variable%20mult_out%20%3A%20std_logic_vector(WIDTH*2-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20variable%20add_out%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%3C%3D%20in2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%3C%3D%20in3%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20We%20now%20use%20variables%20to%20create%20the%20combinational%20logic.%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20In%20general%2C%20assigning%20a%20signal%20can%20become%20a%20wire%20or%20a%20register.%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20In%20this%20case%2C%20they%20synthesize%20to%20wires%20as%20desired.%0A%20%20%20%20%20%20%20%20%20%20%20%20--%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20SYNTHESIS%20RULE%3A%20If%20there%20exists%20path%20where%20a%20variable%20is%20read%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20before%20being%20written%2C%20it%20will%20become%20a%20register.%20This%20is%20similar%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20the%20latch%20problem%20we%20had%20with%20combinational%20logic.%20If%20there%20is%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20a%20path%20where%20the%20variable%20is%20read%20first%2C%20its%20value%20has%20to%20be%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20preserved.%20With%20combinational%20logic%2C%20the%20synthesis%20tool%20had%20to%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20add%20a%20latch%20to%20preserve%20the%20value.%20However%2C%20now%20we%20are%20doing%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20assignment%20on%20a%20rising%20edge%2C%20so%20synthesis%20creates%20a%20register%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20which%20is%20perfectly%20fine%20if%20you%20want%20a%20register.%20However%2C%20you%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20might%20not%20want%20a%20register%2C%20which%20makes%20variables%20somewhat%20error%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20prone.%20As%20a%20result%2C%20I%20suggest%20only%20ever%20using%20variables%20to%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20implement%20wires.%20Use%20signals%20for%20all%20registers.%0A%20%20%20%20%20%20%20%20%20%20%20%20--%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20With%20this%20convention%2C%20every%20signal%20assignment%20should%20be%20to%20a%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20signal%20with%20an%20_r%20suffix%20(a%20register)%2C%20and%20every%20variable%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20assigment%20should%20not%20contain%20an%20_r%20suffix%20because%20it%20is%20a%20wire.%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20add_out%20%20%3A%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mult_out%20%3A%3D%20std_logic_vector(unsigned(add_out)%20*%20unsigned(in3_r))%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20mult_out(2*WIDTH-1%20downto%20WIDTH)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20mult_out(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0A%0A%20%20%20%20out1%20%3C%3D%20out1_r%3B%0A%20%20%20%20out2%20%3C%3D%20out2_r%3B%0A%20%20%20%20%0Aend%20ARCH4_2%3B%0A%0A%0Aarchitecture%20ARCH4_3%20of%20example%20is%0A%0A%20%20%20%20signal%20in1_r%2C%20in2_r%2C%20in3_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20out1_r%2C%20out2_r%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20%20%20%20%20variable%20mult_out%20%3A%20std_logic_vector(WIDTH*2-1%20downto%200)%3B%0A%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%3C%3D%20in2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%3C%3D%20in3%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20Here%20we%20get%20rid%20of%20the%20extra%20variable%20by%20just%20doing%20the%20add%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20and%20multiply%20in%20the%20same%20statement.%0A%20%20%20%20%20%20%20%20%20%20%20%20mult_out%20%3A%3D%20std_logic_vector((unsigned(in1_r)%20%2B%20unsigned(in2_r))%20*%20unsigned(in3_r))%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20mult_out(2*WIDTH-1%20downto%20WIDTH)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20mult_out(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0A%0A%20%20%20%20out1%20%3C%3D%20out1_r%3B%0A%20%20%20%20out2%20%3C%3D%20out2_r%3B%0A%20%20%20%20%0Aend%20ARCH4_3%3B%0A%0A%0Aarchitecture%20ARCH5%20of%20example%20is%0A%0A%20%20%20%20signal%20in1_r%2C%20in2_r%2C%20in3_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20out1_r%2C%20out2_r%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20mult_out%20%20%20%20%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH*2-1%20downto%200)%3B%0A%20%20%20%20signal%20add_out%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20in2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%3C%3D%20in3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20add_out%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20This%20basically%20truncates%20the%20multiplication%20to%20the%20lower%20half.%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20This%20might%20cause%20warnings%20in%20some%20synthesis%20tools%2C%20but%20there%20is%0A%20%20%20%20%20%20%20%20%20%20%20%20--%20no%20way%20around%20this%20to%20my%20knowledge.%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20mult_out(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0A%0A%20%20%20%20--%20Combinational%20logic.%0A%20%20%20%20add_out%20%20%3C%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%20%20%20%20mult_out%20%3C%3D%20std_logic_vector(unsigned(add_out)%20*%20unsigned(in3_r))%3B%0A%0A%20%20%20%20out1%20%3C%3D%20out1_r%3B%0A%20%20%20%20out2%20%3C%3D%20out2_r%3B%0A%20%20%20%20%0Aend%20ARCH5%3B%0A%0A%0A--%20Illustrates%20a%20similar%20implementation%20using%20variables.%0A%0Aarchitecture%20ARCH5_2%20of%20example%20is%0A%0A%20%20%20%20signal%20in1_r%2C%20in2_r%2C%20in3_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20out1_r%2C%20out2_r%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20%20%20%20%20variable%20mult_out%20%3A%20std_logic_vector(WIDTH*2-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20variable%20add_out%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%3C%3D%20in2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%3C%3D%20in3%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20add_out%20%20%3A%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mult_out%20%3A%3D%20std_logic_vector(unsigned(add_out)%20*%20unsigned(in3_r))%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20out1_r%20%3C%3D%20add_out%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20mult_out(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0A%0A%20%20%20%20out1%20%3C%3D%20out1_r%3B%0A%20%20%20%20out2%20%3C%3D%20out2_r%3B%0A%20%20%20%20%0Aend%20ARCH5_2%3B%0A%0A%0Aarchitecture%20ARCH6%20of%20example%20is%0A%0A%20%20%20%20signal%20in1_r%2C%20in2_r%2C%20in3_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20out2_r%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20signal%20add_out%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20mult_out%20%3A%20std_logic_vector(WIDTH*2-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20in2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%3C%3D%20in3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20mult_out(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0A%0A%20%20%20%20add_out%20%20%3C%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%20%20%20%20mult_out%20%3C%3D%20std_logic_vector(unsigned(add_out)%20*%20unsigned(in3_r))%3B%0A%20%20%20%20out1%20%20%20%20%20%3C%3D%20add_out%3B%0A%20%20%20%20out2%20%20%20%20%20%3C%3D%20out2_r%3B%0A%20%20%20%20%0Aend%20ARCH6%3B%0A%0A%0A--%20Illustrates%20a%20similar%20implementation%20using%20variables.%0A%0Aarchitecture%20ARCH6_2%20of%20example%20is%0A%0A%20%20%20%20signal%20in1_r%2C%20in2_r%2C%20in3_r%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20out2_r%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20add_out%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%0Abegin%0A%20%20%20%20process(clk%2C%20rst)%0A%20%20%20%20%20%20%20%20variable%20mult_out%20%3A%20std_logic_vector(WIDTH*2-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20if%20(rst%20%3D%20&#39;1&#39;)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%3C%3D%20(others%20%3D%3E%20&#39;0&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20elsif(rising_edge(clk))%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20in1_r%20%3C%3D%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in2_r%20%3C%3D%20in2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in3_r%20%3C%3D%20in3%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20mult_out%20%3A%3D%20std_logic_vector(unsigned(add_out)%20*%20unsigned(in3_r))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20out2_r%20%20%20%3C%3D%20mult_out(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20end%20process%3B%0A%0A%20%20%20%20add_out%20%3C%3D%20std_logic_vector(unsigned(in1_r)%20%2B%20unsigned(in2_r))%3B%0A%20%20%20%20out1%20%20%20%20%3C%3D%20add_out%3B%0A%20%20%20%20out2%20%20%20%20%3C%3D%20out2_r%3B%0A%20%20%20%20%0Aend%20ARCH6_2%3B%0A%0A%0A%0Alibrary%20ieee%3B%0Ause%20ieee.std_logic_1164.all%3B%0Ause%20ieee.numeric_std.all%3B%0A%0A--%20Top-level%20entity%20for%20evaluating%20all%20the%20examples%20above.%0A%0Aentity%20seq_example%20is%0A%20%20%20%20generic(%0A%20%20%20%20%20%20%20%20WIDTH%20%3A%20positive%20%3A%3D%208)%3B%0A%20%20%20%20port%20(%0A%20%20%20%20%20%20%20%20clk%20%20%3A%20in%20%20std_logic%3B%0A%20%20%20%20%20%20%20%20rst%20%20%3A%20in%20%20std_logic%3B%0A%20%20%20%20%20%20%20%20in1%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20in2%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20in3%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20out1%20%3A%20out%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20out2%20%3A%20out%20std_logic_vector(WIDTH-1%20downto%200))%3B%0Aend%20seq_example%3B%0A%0Aarchitecture%20default_arch%20of%20seq_example%20is%0Abegin%0A%0A%20%20%20%20U_SEQ_EXAMPLE%20%3A%20entity%20work.example(ARCH1)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH2)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH3)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH3_2)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH3_2008)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH4)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH4_2)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH4_3)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH5)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH5_2)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH6)%0A%20%20%20%20%20%20%20%20--U_SEQ_EXAMPLE%3A%20entity%20work.example(ARCH6_2)%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20generic%20map%20(WIDTH%20%3D%3E%20WIDTH)%0A%20%20%20%20%20%20%20%20port%20map%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20clk%20%20%3D%3E%20clk%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20rst%20%20%3D%3E%20rst%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20in1%20%20%3D%3E%20in1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20in2%20%20%3D%3E%20in2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20in3%20%20%3D%3E%20in3%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20out1%20%3D%3E%20out1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20out2%20%3D%3E%20out2%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%0Aend%20default_arch%3B%0A%0A%0A--%20FINAL%20THOUGHTS%3A%0A--%20When%20working%20with%20sequential%20logic%2C%20always%20figure%20out%20how%20many%20registers%0A--%20you%20should%20have%20in%20our%20circuit%20before%20writing%20code.%20Then%2C%20simply%20declare%0A--%20signals%20for%20each%20register%20using%20a%20_r%20suffix%2C%20and%20assign%20those%20signals%20on%20the%0A--%20rising%20clock%20edge.%20Every%20assigned%20signal%20becomes%20a%20register%2C%20and%20the%20RHS%20of%0A--%20each%20assignment%20becomes%20the%20input%20to%20that%20register.%0A--%0A--%20If%20you%20need%20combinational%20logic%20that%20doesn&#39;t%20have%20a%20registered%20output%2C%20you%0A--%20can%20move%20the%20code%20outside%20of%20the%20process%20for%20sequential%20logic%20by%20using%0A--%20either%20concurrent%20statements%2C%20or%20a%20separate%20process(es)%20that%20follow%20my%0A--%20coding%20guidelines%20for%20combinational%20logic.%0A--%0A--%20If%20you%20want%20to%20use%20a%20single%20process%20for%20both%20sequential%20and%20combinational%0A--%20logic%2C%20use%20variables%20for%20the%20combinational%20logic.%20However%2C%20make%20sure%20that%0A--%20the%20variable%20is%20always%20assigned%20before%20it%20is%20read%2C%20or%20it%20will%20become%20a%0A--%20register.%0A--%0A--%20You%20can%20purposely%20use%20a%20variable%20for%20a%20register%2C%20but%20I%20don&#39;t%20recommend%20this%0A--%20style.%0A" style="text-decoration:none !important;" download="seq_example.vhd"><code style="border:1px solid var(--vp-c-brand-darker);color:var(--vp-c-brand-darker);padding:0.4em 0.8em;margin-right:0.8em;">seq_example.vhd</code></a></div><div style="font-size:0.8em;font-weight:bold;margin-top:1em;"> If your browser displays the code as plain text, press <code style="font-size:inherit;">Ctrl/Cmd</code> + <code style="font-size:inherit;">S</code> to save it. </div></details><h2 id="brief" tabindex="-1">Brief <a class="header-anchor" href="#brief" aria-hidden="true">#</a></h2><ul><li><p>Illustrates the important rule that if you assign a signal on a rising clock edge, it becomes a register.</p></li><li><p>Illustrates common mistakes with sequential logic.</p></li><li><p>Goes over the use of signals and variables to accomplish different goals.</p></li><li><p>Suggestion: synthesize each module and use an RTL viewer to ensure the schematic matches the architecture in the pdf. There are no provided testbenches for these examples since they are solely intended to match the structure of the circuits in architectures.pdf.</p></li></ul><h2 id="schematics" tabindex="-1">Schematics <a class="header-anchor" href="#schematics" aria-hidden="true">#</a></h2><iframe src="architectures.pdf#toolbar=0&amp;navpanes=0" style="width:100%;border:none;rule:none;min-height:30rem;">
</iframe><blockquote><p>Alternative link: <a href="architectures.pdf" target="_blank">architectures.pdf</a></p></blockquote><h2 id="entity-example" tabindex="-1">ENTITY <code> example</code> <a class="header-anchor" href="#entity-example" aria-hidden="true">#</a></h2><p>Greg Stitt University of Florida</p><p>This example demonstrates how synthesis tools convert sequential logic descriptions into a circuit. There is one rule that is critically important to remember:</p><p>If you assign a signal (which also includes outputs) on a rising clock edge, the synthesis tool will infer a register.</p><p>It is common to accidentally introduce registers by assigning signals on a rising clock. Always keep in mind exactly how many registers you want. If you have to assign a signal and you don&#39;t want it to become a register, you have to assign it outside of the process used for sequential logic. Do not simply move it outside the rising clock elsif in the same process. This violates my synthesis guidelines for sequential logic. If you don&#39;t want a register on a particular assignment, that means that the assignment corresponds to an output of combinational logic. You should therefore move the assignment into concurrent statements, or a separate process that follows my guidelines for combinational logic.</p><p>INSTRUCTIONS: Please see architectures.pdf for the corresponding schematic of each of the following architectures. Also, use top_level.vhd to synthesize each architecture separately, so you can confirm the synthesize circuit matches the circuit in the pdf.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">entity</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">generic(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">positive</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        clk  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        rst  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        in1  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        in2  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        in3  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        out1 </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        out2 </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch1-of-example" tabindex="-1">ARCH <code> ARCH1</code> of <code>example</code> <a class="header-anchor" href="#arch-arch1-of-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Note that despite having combinational logic in the architecture, we are</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- still using the sequential logic guidelines, which can apply to any</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- circuit that contains sequential logic. There are a few exceptions,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- which I will demonstrate in ARCH3.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- For this example, assume that all registers should be reset to 0.</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- Assigning a signal on a rising clock edge creates a register,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- so this one line of code will instantiate the adder and the</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- register for out1</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- Assigning out2 on a rising clock creates the second register and</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- connects it to in3.</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch2-of-example" tabindex="-1">ARCH <code> ARCH2</code> of <code>example</code> <a class="header-anchor" href="#arch-arch2-of-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- ARCH2 has two registers not connected to outputs, which each require an</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- internal signal.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- NAMING CONVENTION: For any internal signal that is a register, I use</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- a _r suffix. I make an exception for outputs because I generally don&#39;t</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- expose implementation details on the port, and there are situations</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- where an output may or may not be registered based on different</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- conditions. In situations, to ensure that every register has a _r suffix,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- I will create an additional internal signal with the output name and _r</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- suffix. I will then simply do a concurrent assignment of the _r version</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- to the actual output.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Another naming convention that I like is to use a _q suffix on a register</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- output, and a _d suffix for register inputs. There is a lot I like about</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- this convention, but I haven&#39;t adopted it for several reasons. First,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- my register inputs often come directly from other signals, so I don&#39;t</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- want to introduce an extra _d signal. However, I&#39;ve found it can be very</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- useful for 2-process FSMD examples, which are explained later.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- Rest the new registers the same way as before.</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- For ARCH2, in1 and in2 each pass through a register before</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- being added. We can add these registers by simply assigning the</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- corresponding signals on the rising clock edge, which will</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- synthesize two registers.</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- The remainder of the circuit stays the same, with the exception</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- of the adder inputs now coming from the two new registers.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- IMPORTANT:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- Note that the order of these statements (despite being</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- sequential statements) does not affect the functionality or the</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- synthesized circuit. It is important to remember that signals</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- are only updated at the end of the process (technically at the next</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- step), so the addition operation will always use the previous value</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- of in1_r and in2_r regardless of the ordering of statements.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- In fact, this behavior matches the one-cycle delay introduced by</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- the two input registers, which is exactly what we want.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch2-2-of-example" tabindex="-1">ARCH <code> ARCH2_2</code> of <code>example</code> <a class="header-anchor" href="#arch-arch2-2-of-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH2_2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- In this version of ARCH2, we create explicit signals for the two output</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- registers to ensure all registers are explicit.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> out2_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- Here we assign the _r version of the outputs.</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- This concurrent assignemnt connects the explicit registers to the</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- outputs. This code synthesized to the exact same circuit. I used to</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- avoid this strategy, but have come to appreciate it more for complex</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- entities, especially when doing timing optimization.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out2_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH2_2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch3-of-example" tabindex="-1">ARCH <code> ARCH3</code> of <code>example</code> <a class="header-anchor" href="#arch-arch3-of-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Input 3 now needs a register signal (in3_r) because unlike the previous</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- architecture, that register no longer connects to an output.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in3_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- The register on the output of the adder (add_out1_r) now requires an</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- internal signal. Despite still connecting directly to output out1, the</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- register also connects to another register (add_out2_r). To achieve this,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- we either need to be able to read from out1 (not possible in VHDL 1993),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- or we need a separate signal for the register.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> add_out1_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Register add_out2_r does not solely connect to an output, and therefore</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- needs an internal signal.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> add_out2_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- Note that we no longer initialize out1 and out2 here, because</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- they no longer correspond to registers.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- Initialize all signals that correspond to registers.</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            add_out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            add_out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- Create the register for in3 (in3_r), which is required in this</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- architecture because it does not connect to an output.</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- The add operation from the previous architectures is now stored</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- in register add_out1_r. Even though add_out1_r connects to</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- output out1, it also connects to add_out2_r, which requires an</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- internal signal.</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- A common mistake is to assign the add to out1, which creates</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- one register. However, there is no way to read from out1</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- (in VHDL 1993) because it is an output. I often then see people</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- converting out1 to inout or buffer, but do not do that as a</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- workaround. That will synthesize to a different circuit, unless</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- you know exactly what you are doing.</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- VHDL 2008 enables reading from outputs, which could eliminate</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- this extra add_out1_r signal.</span></span>
<span class="line"><span style="color:#A6ACCD;">            add_out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- Create the second register on the output of the adder.</span></span>
<span class="line"><span style="color:#A6ACCD;">            add_out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> add_out1_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- To avoid creating an additional register for out1, we assign out1 as a</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- concurrent statement instead of on the rising clock edge.</span></span>
<span class="line"><span style="color:#A6ACCD;">    out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> add_out1_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Similarly, we assign out2 as a concurrent statement to avoid an extra</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- register.</span></span>
<span class="line"><span style="color:#A6ACCD;">    out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">add_out2_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in3_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- COMMON MISTAKE: accidentally assigning out1 and out2 inside the process</span></span>
<span class="line"><span style="color:#676E95;">-- is very common, which results in a different synthesized circuit. In the</span></span>
<span class="line"><span style="color:#676E95;">-- best case, this mistake just adds extra registers. However, those extra</span></span>
<span class="line"><span style="color:#676E95;">-- registers introduce timing delays which very often cause the rest of</span></span>
<span class="line"><span style="color:#676E95;">-- your circuit to stop working.    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch3-2-of-example" tabindex="-1">ARCH <code> ARCH3_2</code> of <code>example</code> <a class="header-anchor" href="#arch-arch3-2-of-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH3_2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in3_r        </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> add_out1_r   </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> add_out2_r   </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            add_out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            add_out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            add_out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            add_out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> add_out1_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Since the code outside the process is all combinational logic, we can</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- alternatively use any code that synthesizes to combinational logic.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- For example, we could have use a separate process as shown below, while</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- making sure to follow all synthesis coding guidelines for combinational</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- logic.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- A process is overkill for this simple example, but if the combinational</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- logic gets complex enough, it is quite common to have a process for</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- sequential logic and a process for combinational logic. In fact, you</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- could have multiple processes. For example, since out1 and out2 don&#39;t</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- share any inputs, it might make sense to have a process for each. Again,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- for this simple example, that would be overkill, but if each output had</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- complex logic, a process for each could be appropriate. When using</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- many processes, it is a good idea to give them a meaningful label</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- to make the purpose explicit. Also, this makes it easier to find</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- variables in simulators because if you don&#39;t give a process a name,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- the tool with generator a random one for you. Searching through randomly</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- named processes for a specific variable can be annoying.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">add_out1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> add_out2_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in3_r</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> add_out1_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">add_out2_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in3_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH3_2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch3-2008-of-example" tabindex="-1">ARCH <code> ARCH3_2008</code> of <code>example</code> <a class="header-anchor" href="#arch-arch3-2008-of-example" aria-hidden="true">#</a></h2><p>The following architectures illustrates a slightl simplifications from reading from an output, which is only possible in VHDL 2008. Uncomment if you tool supports VHDL 2008.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH3_2008</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in3_r        </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#676E95;">-- We no longer need add_out1_r in this version.</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> add_out2_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">           in1_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           in2_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           in3_r      </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">           add_out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">           in1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           in2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           in3_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#676E95;">-- In this version, we assign out1, since it is registered.</span></span>
<span class="line"><span style="color:#A6ACCD;">           out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#676E95;">-- VHDL 2008 allows us to read from outputs, so this functionality</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#676E95;">-- replaces the need for the previous add_out1_r.</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#676E95;">-- For this example, I personally prefer the previous architecture.</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#676E95;">-- In the previous version the exact registers are more obvious.</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#676E95;">-- However, they both synthesize to the same circuit.</span></span>
<span class="line"><span style="color:#A6ACCD;">           add_out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">add_out2_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in3_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH3_2008</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch4-of-example" tabindex="-1">ARCH <code> ARCH4</code> of <code>example</code> <a class="header-anchor" href="#arch-arch4-of-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH4</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in3_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- These aren&#39;t necessary, but make the output registers more explicit.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> out2_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Note that these signal do not have a _r suffix because they are not</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- registered. We could potentially register the multiplier output and the</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- slice it to form the output, but this version more closely matches the</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- figure, which has a separate register on each output.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> mult_out </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> add_out  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- Note that we are only assigning registers here.</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> mult_out</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> mult_out</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Combinational logic.</span></span>
<span class="line"><span style="color:#A6ACCD;">    add_out  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">    mult_out </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">add_out</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in3_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- These aren&#39;t necessary, but are useful for consistently having a _r</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- signal for every register. We could have just assigned out1 and out2</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- inside the process.</span></span>
<span class="line"><span style="color:#A6ACCD;">    out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out2_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH4</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch4-2-of-example" tabindex="-1">ARCH <code> ARCH4_2</code> of <code>example</code> <a class="header-anchor" href="#arch-arch4-2-of-example" aria-hidden="true">#</a></h2><p>This next architecture is a variation of the previous one that uses variables create the combinational logic in the same process as the registers.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH4_2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in3_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> out2_r      </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> mult_out </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> add_out  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- We now use variables to create the combinational logic.</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- In general, assigning a signal can become a wire or a register.</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- In this case, they synthesize to wires as desired.</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- SYNTHESIS RULE: If there exists path where a variable is read</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- before being written, it will become a register. This is similar</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- the latch problem we had with combinational logic. If there is</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- a path where the variable is read first, its value has to be</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- preserved. With combinational logic, the synthesis tool had to</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- add a latch to preserve the value. However, now we are doing the</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- assignment on a rising edge, so synthesis creates a register,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- which is perfectly fine if you want a register. However, you</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- might not want a register, which makes variables somewhat error</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- prone. As a result, I suggest only ever using variables to</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- implement wires. Use signals for all registers.</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- With this convention, every signal assignment should be to a</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- signal with an _r suffix (a register), and every variable</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- assigment should not contain an _r suffix because it is a wire.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            add_out  </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            mult_out </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">add_out</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in3_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> mult_out</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> mult_out</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out2_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH4_2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch4-3-of-example" tabindex="-1">ARCH <code> ARCH4_3</code> of <code>example</code> <a class="header-anchor" href="#arch-arch4-3-of-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH4_3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in3_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> out2_r      </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> mult_out </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- Here we get rid of the extra variable by just doing the add</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- and multiply in the same statement.</span></span>
<span class="line"><span style="color:#A6ACCD;">            mult_out </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">((</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in3_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> mult_out</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> mult_out</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out2_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH4_3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch5-of-example" tabindex="-1">ARCH <code> ARCH5</code> of <code>example</code> <a class="header-anchor" href="#arch-arch5-of-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH5</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in3_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> out2_r      </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> mult_out            </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> add_out             </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> add_out</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- This basically truncates the multiplication to the lower half.</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- This might cause warnings in some synthesis tools, but there is</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;">-- no way around this to my knowledge.</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> mult_out</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Combinational logic.</span></span>
<span class="line"><span style="color:#A6ACCD;">    add_out  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">    mult_out </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">add_out</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in3_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out2_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH5</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch5-2-of-example" tabindex="-1">ARCH <code> ARCH5_2</code> of <code>example</code> <a class="header-anchor" href="#arch-arch5-2-of-example" aria-hidden="true">#</a></h2><p>Illustrates a similar implementation using variables.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH5_2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in3_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> out2_r      </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> mult_out </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> add_out  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            add_out  </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            mult_out </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">add_out</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in3_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            out1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> add_out</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> mult_out</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    out1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out1_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    out2 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out2_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH5_2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch6-of-example" tabindex="-1">ARCH <code> ARCH6</code> of <code>example</code> <a class="header-anchor" href="#arch-arch6-of-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH6</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in3_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> out2_r              </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> add_out  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> mult_out </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> mult_out</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    add_out  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">    mult_out </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">add_out</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in3_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">    out1     </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> add_out</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    out2     </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out2_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH6</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-arch6-2-of-example" tabindex="-1">ARCH <code> ARCH6_2</code> of <code>example</code> <a class="header-anchor" href="#arch-arch6-2-of-example" aria-hidden="true">#</a></h2><p>Illustrates a similar implementation using variables.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH6_2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in2_r</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in3_r </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> out2_r              </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> add_out             </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> mult_out </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rst </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif(</span><span style="color:#82AAFF;">rising_edge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">clk</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3_r </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            mult_out </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">add_out</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in3_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2_r   </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> mult_out</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    add_out </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1_r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in2_r</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">    out1    </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> add_out</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    out2    </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> out2_r</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ARCH6_2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="entity-seq-example" tabindex="-1">ENTITY <code> seq_example</code> <a class="header-anchor" href="#entity-seq-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">library</span><span style="color:#A6ACCD;"> ieee</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">use</span><span style="color:#A6ACCD;"> ieee</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">std_logic_1164</span><span style="color:#89DDFF;">.all;</span></span>
<span class="line"><span style="color:#89DDFF;">use</span><span style="color:#A6ACCD;"> ieee</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">numeric_std</span><span style="color:#89DDFF;">.all;</span></span>
<span class="line"></span></code></pre></div><p>Top-level entity for evaluating all the examples above.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">entity</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">seq_example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">generic(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">positive</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        clk  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        rst  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        in1  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        in2  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        in3  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        out1 </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        out2 </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">seq_example</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="arch-default-arch-of-seq-example" tabindex="-1">ARCH <code> default_arch</code> of <code>seq_example</code> <a class="header-anchor" href="#arch-default-arch-of-seq-example" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">default_arch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">seq_example</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">U_SEQ_EXAMPLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">entity</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">work</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">example</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">ARCH1</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH2)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH3)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH3_2)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH3_2008)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH4)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH4_2)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH4_3)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH5)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH5_2)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH6)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_SEQ_EXAMPLE: entity work.example(ARCH6_2)      </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">generic</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">            clk  </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> clk</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            rst  </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> rst</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1  </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            in2  </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> in2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            in3  </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> in3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            out1 </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> out1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            out2 </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> out2</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">default_arch</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div>`,50),e=[p];function t(r,c,D,C,A,y){return a(),n("div",null,e)}const d=s(o,[["render",t]]);export{F as __pageData,d as default};
