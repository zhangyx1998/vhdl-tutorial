import{_ as s,c as n,o as a,a as l}from"./app.e11dc92d.js";const i=JSON.parse('{"title":"ALU","description":"","frontmatter":{"outline":"deep"},"headers":[{"level":2,"title":"Brief","slug":"brief","link":"#brief","children":[]},{"level":2,"title":"Entity alu1","slug":"entity-alu1","link":"#entity-alu1","children":[{"level":3,"title":"Arch bad of alu1","slug":"arch-bad-of-alu1","link":"#arch-bad-of-alu1","children":[]},{"level":3,"title":"Arch arch1 of alu1","slug":"arch-arch1-of-alu1","link":"#arch-arch1-of-alu1","children":[]},{"level":3,"title":"Arch arch2 of alu1","slug":"arch-arch2-of-alu1","link":"#arch-arch2-of-alu1","children":[]},{"level":3,"title":"Arch arch3 of alu1","slug":"arch-arch3-of-alu1","link":"#arch-arch3-of-alu1","children":[]},{"level":3,"title":"Arch arch4 of alu1","slug":"arch-arch4-of-alu1","link":"#arch-arch4-of-alu1","children":[]}]},{"level":2,"title":"Entity alu2","slug":"entity-alu2","link":"#entity-alu2","children":[{"level":3,"title":"Arch arch1 of alu2","slug":"arch-arch1-of-alu2","link":"#arch-arch1-of-alu2","children":[]}]},{"level":2,"title":"Entity alu","slug":"entity-alu","link":"#entity-alu","children":[{"level":3,"title":"Arch default_arch of alu","slug":"arch-default-arch-of-alu","link":"#arch-default-arch-of-alu","children":[]}]},{"level":2,"title":"Package alu_pkg","slug":"package-alu-pkg","link":"#package-alu-pkg","children":[]},{"level":2,"title":"Entity alu_tb","slug":"entity-alu-tb","link":"#entity-alu-tb","children":[{"level":3,"title":"Arch exhaustive of alu_tb","slug":"arch-exhaustive-of-alu-tb","link":"#arch-exhaustive-of-alu-tb","children":[]}]}],"relativePath":"combinational/alu.md"}'),o={name:"combinational/alu.md"},p=l(`<h1 id="alu" tabindex="-1">ALU <a class="header-anchor" href="#alu" aria-hidden="true">#</a></h1><details class="details custom-block"><summary>Get source code for this page</summary><div style="display:flex;flex-direction:row;flex-wrap:wrap;"><a href="data:text/plain;charset=utf-8,--%20Greg%20Stitt%0A--%20University%20of%20Florida%0A%0A--%20In%20this%20example%2C%20we%20look%20at%20various%20constructs%20that%20can%20be%20used%20to%20create%0A--%20an%20ALU.%20One%20of%20the%20most%20important%20takeaway%20points%20is%20to%20avoid%20latches%20by%0A--%20ensuring%20that%20all%20outputs%20are%20defined%20on%20all%20paths%20through%20a%20process.%0A--%0A--%20Like%20the%20other%20examples%2C%20there%20are%20different%20architectures%20and%20entities%2C%0A--%20along%20with%20the%20top-level%20alu%20entity%20at%20the%20bottom%20of%20the%20file%2C%20which%20can%20be%0A--%20change%20to%20synthesize%20or%20simulate%20each%20implementation.%0A--%0A--%20NOTE%3A%20Simulation%20of%20some%20of%20these%20implemenations%20may%20result%20in%20warnings%0A--%20similar%20to%20the%20following%3A%0A--%0A--%20Warning%3A%20NUMERIC_STD.%22%3E%22%3A%20metavalue%20detected%2C%20returning%20FALSE%0A--%20%23%20%20%20%20Time%3A%200%20ns%20%20Iteration%3A%200%20%20Instance%3A%20%2Falu_tb%2FUUT%2FU_ALU%0A--%0A--%20A%20metavalue%20is%20anything%20other%20than%20&#39;1&#39;%20or%20&#39;0&#39;%20(e.g.%2C%20&#39;X&#39;%2C%20&#39;-&#39;%2C%20&#39;U&#39;).%0A--%20As%20long%20as%20this%20happens%20at%20time%200%2C%20it%20can%20be%20ignored.%20It%20usually%20happens%0A--%20because%20a%20&#39;U&#39;%20reaches%20the%20input%20of%20an%20operator%20(in%20this%20case%20%3E).%20It%20can%0A--%20also%20happen%20at%20other%20times%2C%20in%20which%20case%20you%20should%20verify%20that%20it%20is%0A--%20intended.%20Explicit%20use%20of%20don&#39;t%20cares%20can%20cause%20this%20warning%2C%20as%20is%20discussed%0A--%20in%20the%20example%20below.%0A%0Alibrary%20ieee%3B%0Ause%20ieee.std_logic_1164.all%3B%0Ause%20ieee.numeric_std.all%3B%0A%0A--%20Entity%3A%20alu1%0A--%20ALU%20with%20generic%20width%20that%20does%20addition%20(sel%20%3D%20%2200%22)%2C%0A--%20subtraction%20(sel%3D%2201%22)%2C%20and%20(sel%3D%2210%22)%2C%20or%20(sel%3D%2211%22).%20There%20are%20also%0A--%20status%20flags%20to%20signify%20positive%2C%20negative%2C%20and%20zero%20results.%0A--%20For%20illustrative%20purposes%2C%20assume%20the%20flags%20can%20be%20set%20to%20any%20value%20for%0A--%20the%20%22and%22%20and%20%22or%22%20cases.%0A%0Aentity%20alu1%20is%0A%20%20%20%20generic%20(%0A%20%20%20%20%20%20%20%20WIDTH%20%3A%20positive%20%3A%3D%208)%3B%0A%20%20%20%20port%20(%0A%20%20%20%20%20%20%20%20in0%20%20%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20in1%20%20%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20sel%20%20%20%20%3A%20in%20%20std_logic_vector(1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20neg%20%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20pos%20%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20zero%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20output%20%3A%20out%20std_logic_vector(WIDTH-1%20downto%200))%3B%0Aend%20alu1%3B%0A%0A%0A--%20Although%20this%20architecture%20will%20simulate%20correctly%2C%20there%20is%20a%20synthesis%0A--%20problem.%20Note%20that%20the%20status%20flags%20are%20not%20defined%20by%20the%20%22and%22%20or%20%22or%22%0A--%20cases%20because%20the%20ALU&#39;s%20flags%20do%20not%20have%20meaning%20for%20these%20operations.%0A--%20However%2C%20we%20are%20describing%20combinational%20logic.%20What%20happens%20to%20the%20flags%0A--%20if%20the%20%22and%22%20or%20%22or%22%20cases%20are%20selected%20according%20to%20this%20code%3F%0A--%20The%20answer%20is%20that%20flags%20preserve%20their%20previous%20values.%0A--%20Using%20combinational%20logic%2C%20how%20can%20you%20preserve%20a%20value%3F%20In%20general%2C%0A--%20you%20can&#39;t%2C%20which%20is%20the%20purpose%20of%20sequential%20logic.%20So%2C%20what%20ends%20up%0A--%20happening%20is%20that%20the%20synthesis%20tool%20will%20infer%20latches%20because%20there%20is%20no%0A--%20clock%20signal%20to%20create%20a%20register.%20Although%20this%20could%20technically%20still%0A--%20work%2C%20your%20resulting%20circuit%20is%20not%20what%20was%20intended%20and%20wastes%20resources.%0A--%20In%20addition%2C%20latches%20can%20cause%20many%20timing%20problems%20unless%20you%20know%20how%20to%0A--%20properly%20use%20them.%20They%20are%20especially%20problematic%20in%20FPGAs%20because%20there%0A--%20are%20no%20latches%2C%20so%20the%20synthesis%20tools%20must%20imitate%20their%20behavior.%0A--%20In%20general%2C%20you%20sohuld%20always%20avoid%20latches%20in%20combinational%20logic.%20If%20you%0A--%20intentionally%20want%20a%20latch%20somewhere%2C%20design%20your%20circuit%20first%20with%20the%0A--%20latch%2C%20then%20write%20the%20code%20for%20it.%20For%20FPGA%20designs%2C%20latches%20should%20almost%0A--%20always%20be%20avoided%2C%20unless%20you%20have%20a%20very%20good%20reason%20to%20use%20them.%0A--%0A--%20To%20solve%20this%20problem%2C%20every%20path%20through%20the%20process%20has%20to%20define%20each%0A--%20output%20and%20signal.%20If%20*any*%20path%20exists%20that%20does%20not%20define%20an%20output%2C%20that%0A--%20output%20will%20be%20inferred%20as%20a%20latch.%20In%20this%20example%2C%20the%20paths%20through%20the%0A--%20%22and%22%20and%20%22or%22%20cases%20do%20not%20define%20the%20flag%20outputs%2C%20and%20therefore%20result%0A--%20in%20latches.%0A--%0A--%20SYNTHESIS%20GUIDELINE%202%20FOR%20COMBINATIONAL%20LOGIC%3A%20Make%20sure%20that%20every%20path%0A--%20through%20the%20process%20defines%20every%20output%20and%20internal%20signal.%0A%0Aarchitecture%20bad%20of%20alu1%20is%0Abegin%0A%20%20%20%20--%20Remember%20to%20use%20combinational%20synthesis%20guideline%201%20(put%20all%20inputs%20in%0A%20%20%20%20--%20sensitivity%20list)%0A%20%20%20%20%0A%20%20%20%20process(in0%2C%20in1%2C%20sel)%0A%20%20%20%20%20%20%20%20variable%20temp%20%3A%20signed(WIDTH-1%20downto%200)%3B%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20case%20sel%20is%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2200%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20Must%20cast%20in0%20and%20in1%20to%20either%20signed%20because%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20addition%20is%20not%20defined%20for%20std_logic_vector%20when%20using%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20ieee.numeric_std%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0)%20%2B%20signed(in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20Set%20the%20flags.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(temp%20%3E%200)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elsif%20(temp%20%3D%200)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20if%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2201%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20Same%20thing%20except%20using%20subtraction.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0)%20-%20signed(in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(temp%20%3E%200)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20elsif%20(temp%20%3D%200)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20if%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2210%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20Doesn&#39;t%20define%20flags%20(causes%20latches%20on%20each%20flag)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0%20and%20in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2211%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20Doesn&#39;t%20define%20flags%20(causes%20latch%20on%20each%20flag)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0%20or%20in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20others%20%3D%3E%20null%3B%0A%20%20%20%20%20%20%20%20end%20case%3B%0A%0A%20%20%20%20%20%20%20%20output%20%3C%3D%20std_logic_vector(temp)%3B%0A%0A%20%20%20%20end%20process%3B%0Aend%20bad%3B%0A%0A%0A--%20This%20architecture%20demonstrates%20one%20possible%20way%20of%20fixing%20the%20latch%20issue.%0A%0Aarchitecture%20arch1%20of%20alu1%20is%0Abegin%20%20--%20arch1%0A%0A%20%20%20%20process(in0%2C%20in1%2C%20sel)%0A%20%20%20%20%20%20%20%20variable%20temp%20%3A%20signed(WIDTH-1%20downto%200)%3B%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20case%20sel%20is%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2200%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0)%20%2B%20signed(in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2201%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0)%20-%20signed(in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2210%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0%20and%20in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2211%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0%20or%20in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20others%20%3D%3E%20null%3B%0A%20%20%20%20%20%20%20%20end%20case%3B%0A%0A%20%20%20%20%20%20%20%20--%20By%20moving%20the%20flag%20definitions%20outside%20of%20the%20case%20statement%2C%20we%0A%20%20%20%20%20%20%20%20--%20guarantee%20that%20all%20the%20flags%20are%20defined%20by%20all%20paths.%0A%0A%20%20%20%20%20%20%20%20if%20(temp%20%3E%200)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20elsif%20(temp%20%3D%200)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%0A%20%20%20%20%20%20%20%20output%20%3C%3D%20std_logic_vector(temp)%3B%0A%0A%20%20%20%20end%20process%3B%0Aend%20arch1%3B%0A%0A%0Aarchitecture%20arch2%20of%20alu1%20is%0Abegin%20%20--%20arch2%0A%0A%20%20%20%20process(in0%2C%20in1%2C%20sel)%0A%20%20%20%20%20%20%20%20variable%20temp%20%3A%20signed(WIDTH-1%20downto%200)%3B%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20--%20Another%20option%20that%20I%20recommend%20in%20most%20cases%20is%20to%20assign%20default%0A%20%20%20%20%20%20%20%20--%20values%20to%20each%20output%20at%20the%20beginning%20of%20the%20process.%20Then%2C%20if%0A%20%20%20%20%20%20%20%20--%20you%20need%20to%20update%20the%20value%20later%2C%20you%20still%20can%20because%20these%0A%20%20%20%20%20%20%20%20--%20are%20sequential%20statements.%20We%20aren&#39;t%20assigning%20a%20default%0A%20%20%20%20%20%20%20%20--%20value%20to%20the%20output%20signal%2C%20but%20we%20certainly%20can.%20In%20fact%2C%20if%20the%0A%20%20%20%20%20%20%20%20--%20ALU%20didn&#39;t%20support%20all%20possible%20select%20combinations%2C%20we%20could%20do%20that%0A%20%20%20%20%20%20%20%20--%20to%20avoid%20a%20latch%20on%20the%20output.%0A%20%20%20%20%20%20%20%20--%0A%20%20%20%20%20%20%20%20--%20This%20strategy%20requires%20less%20code%2C%20tends%20to%20be%20less%20error%20prone%2C%20and%0A%20%20%20%20%20%20%20%20--%20guarantees%20you%20won&#39;t%20have%20latches%20on%20the%20signals%20with%20default%20values.%0A%20%20%20%20%20%20%20%20--%20Use%20it%20whenever%20you%20can.%0A%20%20%20%20%20%20%20%20--%0A%20%20%20%20%20%20%20%20--%20Note%20that%20this%20approach%20doesn&#39;t%20work%20with%20concurrent%20assignements.%0A%20%20%20%20%20%20%20%20--%20Multiple%20concurrent%20assignments%20to%20the%20same%20signal%20creates%20multiple%0A%20%20%20%20%20%20%20%20--%20drivers%2C%20which%20will%20result%20in%20synthesis%20errors.%20I%20haven&#39;t%20looked%0A%20%20%20%20%20%20%20%20--%20into%20the%20exact%20simulation%20semantics%20of%20multiple%20drivers%2C%20but%20in%0A%20%20%20%20%20%20%20%20--%20Modelsim%2C%20you%20will%20get%20undefined%20values%20from%20multiple%20drivers.%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;0&#39;%3B%0A%0A%20%20%20%20%20%20%20%20case%20sel%20is%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2200%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0)%20%2B%20signed(in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2201%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0)%20-%20signed(in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2210%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0%20and%20in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2211%22%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%3A%3D%20signed(in0%20or%20in1)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20others%20%3D%3E%20null%3B%0A%20%20%20%20%20%20%20%20end%20case%3B%0A%0A%20%20%20%20%20%20%20%20--%20This%20code%20is%20simpler%20now%20that%20we%20have%20default%20values%20of%20&#39;0&#39;.%0A%20%20%20%20%20%20%20%20if%20(temp%20%3E%200)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20elsif%20(temp%20%3D%200)%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20neg%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%0A%20%20%20%20%20%20%20%20output%20%3C%3D%20std_logic_vector(temp)%3B%0A%20%20%20%20end%20process%3B%0Aend%20arch2%3B%0A%0A%0Aarchitecture%20arch3%20of%20alu1%20is%0A%0A%20%20%20%20--%20We%20can%20use%20constants%20to%20make%20the%20case%20statements%20more%20readable%2C%20which%0A%20%20%20%20--%20would%20be%20very%20useful%20for%20a%20large%20number%20of%20ALU%20operations.%0A%20%20%20%20constant%20C_ADD%20%3A%20std_logic_vector(1%20downto%200)%20%3A%3D%20%2200%22%3B%0A%20%20%20%20constant%20C_SUB%20%3A%20std_logic_vector(1%20downto%200)%20%3A%3D%20%2201%22%3B%0A%20%20%20%20constant%20C_AND%20%3A%20std_logic_vector(1%20downto%200)%20%3A%3D%20%2210%22%3B%0A%20%20%20%20constant%20C_OR%20%20%3A%20std_logic_vector(1%20downto%200)%20%3A%3D%20%2211%22%3B%0A%0Abegin%20%20--%20arch3%0A%0A%20%20%20%20process(in0%2C%20in1%2C%20sel)%0A%20%20%20%20%20%20%20%20variable%20temp%20%3A%20signed(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20%20%20%20%20--%20Here%20we%20use%20a%20procedure%20(similar%20to%20a%20function%20call)%20to%20perform%0A%20%20%20%20%20%20%20%20--%20the%20repeated%20functionality%20of%20setting%20the%20output%20flags.%0A%20%20%20%20%20%20%20%20procedure%20update_flags(variable%20result%20%3A%20in%20signed(WIDTH-1%20downto%200))%20is%0A%20%20%20%20%20%20%20%20begin%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;0&#39;%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(result%20%3E%200)%20then%20pos%20%20%20%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20elsif%20(result%20%3D%200)%20then%20zero%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20neg%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20%20%20%20%20end%20update_flags%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20--%20If%20we%20really%20don&#39;t%20care%20what%20happens%20for%20the%20and%20and%20or%20operations%2C%0A%20%20%20%20%20%20%20%20--%20we%20can%20make%20the%20default%20an%20actual%20don&#39;t%20care%20&#39;-&#39;%2C%20which%20might%20give%0A%20%20%20%20%20%20%20%20--%20the%20synthesis%20tool%20the%20ability%20to%20do%20extra%20logic%20minimization.%0A%20%20%20%20%20%20%20%20--%0A%20%20%20%20%20%20%20%20--%20In%20general%2C%20I%20avoid%20assigning%20don&#39;t%20cares%20unless%20I%20am%20specifically%0A%20%20%20%20%20%20%20%20--%20trying%20to%20optimize%20an%20entity%20because%20don&#39;t%20care%20values%20reaching%0A%20%20%20%20%20%20%20%20--%20arithmetic%20operators%20can%20cause%20a%20huge%20number%20of%20simulation%20warnings.%0A%20%20%20%20%20%20%20%20--%0A%20%20%20%20%20%20%20%20--%20Another%20option%20would%20be%20to%20add%20a%20boolean%20generic%20that%20specifies%0A%20%20%20%20%20%20%20%20--%20whether%20or%20not%20to%20use%20don&#39;t%20cares%20so%20that%20you%20can%20turn%20it%20off%20for%0A%20%20%20%20%20%20%20%20--%20simulations.%0A%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;-&#39;%3B%0A%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;-&#39;%3B%0A%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;-&#39;%3B%0A%0A%20%20%20%20%20%20%20%20case%20sel%20is%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20C_ADD%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%20%20%3A%3D%20signed(in0)%20%2B%20signed(in1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20std_logic_vector(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20update_flags(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20C_SUB%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%20%20%3A%3D%20signed(in0)%20-%20signed(in1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20std_logic_vector(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20update_flags(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20C_AND%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20in0%20and%20in1%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20C_OR%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20in0%20or%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20others%20%3D%3E%20null%3B%0A%20%20%20%20%20%20%20%20end%20case%3B%0A%20%20%20%20end%20process%3B%0Aend%20arch3%3B%0A%0A%0A--%20One%20disadvantage%20to%20using%20constants%20for%20the%20select%20is%20that%20the%20simulation%0A--%20will%20show%20the%20values%20of%20the%20select.%20Although%20that%20isn&#39;t%20a%20problem%20with%0A--%20just%204%20selects%2C%20it%20would%20be%20confusing%20for%2016%2B%20select%20values.%20Ideally%2C%20we%0A--%20could%20see%20the%20name%20of%20the%20constant%20so%20we%20don&#39;t%20have%20to%20remember%20the%20encoded%0A--%20value.%0A--%0A--%20This%20goal%20can%20be%20achieved%20via%20enumerated%20types.%20The%20following%20architecture%0A--%20isn&#39;t%20a%20great%20way%20of%20doing%20this%2C%20and%20instead%20just%20illustrates%20how%20it%20could%0A--%20be%20done%20for%20this%20entity.%20The%20following%20entity%20shows%20a%20more%20elegant%20way%20of%0A--%20accomplishing%20this%20goal.%0A%0Aarchitecture%20arch4%20of%20alu1%20is%0A%0A%20%20%20%20constant%20C_ADD%20%3A%20std_logic_vector(1%20downto%200)%20%3A%3D%20%2200%22%3B%0A%20%20%20%20constant%20C_SUB%20%3A%20std_logic_vector(1%20downto%200)%20%3A%3D%20%2201%22%3B%0A%20%20%20%20constant%20C_AND%20%3A%20std_logic_vector(1%20downto%200)%20%3A%3D%20%2210%22%3B%0A%20%20%20%20constant%20C_OR%20%20%3A%20std_logic_vector(1%20downto%200)%20%3A%3D%20%2211%22%3B%0A%0A%20%20%20%20--%20Create%20an%20enumerated%20type%20for%20the%20select%20values.%0A%20%20%20%20type%20alu_sel_t%20is%20(ADD_SEL%2C%20SUB_SEL%2C%20AND_SEL%2C%20OR_SEL)%3B%0A%0A%20%20%20%20--%20Create%20a%20new%20select%20signal%20using%20that%20type.%0A%20%20%20%20signal%20alu_sel%20%3A%20alu_sel_t%3B%0A%20%20%20%20%0Abegin%20%20--%20arch4%0A%0A%20%20%20%20--%20We%20have%20to%20manually%20convert%20between%20std_logic_vector%20and%20alu_sel_t.%0A%20%20%20%20--%20You%20would%20probably%20never%20write%20ALU%20code%20this%20way%2C%20but%20if%20you%20need%0A%20%20%20%20--%20to%20do%20this%20conversion%2C%20this%20is%20how%20to%20do%20it.%0A%20%20%20%20%0A%20%20%20%20alu_sel%20%3C%3D%20ADD_SEL%20when%20sel%20%3D%20C_ADD%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SUB_SEL%20when%20sel%20%3D%20C_SUB%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20AND_SEL%20when%20sel%20%3D%20C_AND%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20OR_SEL%3B%0A%0A%20%20%20%20--%20We%20now%20use%20the%20alu_sel%20in%20the%20sensitivity%20list%20instead%20of%20sel.%0A%20%20%20%20process(in0%2C%20in1%2C%20alu_sel)%0A%20%20%20%20%20%20%20%20variable%20temp%20%3A%20signed(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20%20%20%20%20procedure%20update_flags(variable%20result%20%3A%20in%20signed(WIDTH-1%20downto%200))%20is%0A%20%20%20%20%20%20%20%20begin%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;0&#39;%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(result%20%3E%200)%20then%20pos%20%20%20%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20elsif%20(result%20%3D%200)%20then%20zero%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20neg%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20%20%20%20%20end%20update_flags%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;-&#39;%3B%0A%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;-&#39;%3B%0A%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;-&#39;%3B%0A%0A%20%20%20%20%20%20%20%20--%20In%20this%20updated%20case%2C%20we%20use%20the%20enumerated%20type%20names%2C%20which%20will%0A%20%20%20%20%20%20%20%20--%20show%20up%20in%20simulation.%0A%20%20%20%20%20%20%20%20case%20alu_sel%20is%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20ADD_SEL%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%20%20%3A%3D%20signed(in0)%20%2B%20signed(in1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20std_logic_vector(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20update_flags(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20SUB_SEL%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%20%20%3A%3D%20signed(in0)%20-%20signed(in1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20std_logic_vector(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20update_flags(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20AND_SEL%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20in0%20and%20in1%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20OR_SEL%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20in0%20or%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20others%20%3D%3E%20null%3B%0A%20%20%20%20%20%20%20%20end%20case%3B%0A%20%20%20%20end%20process%3B%0A%0A--%20Another%20alternative%20we%20could%20have%20done%20would%20be%20to%20leave%20the%20previous%0A--%20process%20using%20sel%20instead%20of%20alu_sel.%20In%20this%20case%2C%20we%20can%20see%20the%20names%0A--%20of%20the%20select%20values%20by%20adding%20alu_sel%20to%20the%20waveform%2C%20while%20using%20the%0A--%20sel%20signal%20in%20the%20case%20statement.%20However%2C%20that%20approach%20would%20likely%0A--%20lead%20to%20synthesis%20warnings%20because%20alu_sel%20has%20no%20impact%20on%20any%20outputs.%0Aend%20arch4%3B%0A%0A%0A--------------------------------------------------------------------------%0A%0A--%20The%20following%20alu2%20entity%20illustrates%20a%20more%20elegant%20approach%20to%20achieving%0A--%20select%20values%20that%20are%20named%20in%20simulation.%20It%20also%20demonstrates%20how%20to%20use%0A--%20a%20package.%0A%0Alibrary%20ieee%3B%0Ause%20ieee.std_logic_1164.all%3B%0Ause%20ieee.numeric_std.all%3B%0A%0A--%20See%20alu_pkg.vhd%20for%20the%20contents%20of%20the%20package.%20Basically%2C%20the%20package%0A--%20defines%20the%20alu_sel_t%20type%20so%20that%20we%20can%20use%20it%20in%20the%20port.%0Ause%20work.alu_pkg.all%3B%0A%0Aentity%20alu2%20is%0A%20%20%20%20generic%20(%0A%20%20%20%20%20%20%20%20WIDTH%20%3A%20positive%20%3A%3D%208)%3B%0A%20%20%20%20port%20(%0A%20%20%20%20%20%20%20%20in0%20%20%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20in1%20%20%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20--%20Since%20we%20defined%20alu_sel_t%20in%20alu_pkg%2C%20we%20can%20use%20a%20custom%20type%0A%20%20%20%20%20%20%20%20--%20in%20the%20port%20of%20this%20entity.%0A%20%20%20%20%20%20%20%20sel%20%20%20%20%3A%20in%20%20alu_sel_t%3B%0A%20%20%20%20%20%20%20%20neg%20%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20pos%20%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20zero%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20output%20%3A%20out%20std_logic_vector(WIDTH-1%20downto%200))%3B%0Aend%20alu2%3B%0A%0Aarchitecture%20arch1%20of%20alu2%20is%0Abegin%0A%20%20%20%20--%20Since%20we%20made%20sel%20use%20the%20alu_sel_t%2C%20we%20don&#39;t%20have%20to%20change%20anything%0A%20%20%20%20--%20here%20other%20than%20the%20names%20of%20the%20constants.%0A%20%20%20%20process(in0%2C%20in1%2C%20sel)%0A%20%20%20%20%20%20%20%20variable%20temp%20%3A%20signed(WIDTH-1%20downto%200)%3B%0A%0A%20%20%20%20%20%20%20%20procedure%20update_flags(variable%20result%20%3A%20in%20signed(WIDTH-1%20downto%200))%20is%0A%20%20%20%20%20%20%20%20begin%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;0&#39;%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(result%20%3E%200)%20then%20pos%20%20%20%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20elsif%20(result%20%3D%200)%20then%20zero%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20neg%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20end%20if%3B%0A%20%20%20%20%20%20%20%20end%20update_flags%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20pos%20%20%3C%3D%20&#39;-&#39;%3B%0A%20%20%20%20%20%20%20%20neg%20%20%3C%3D%20&#39;-&#39;%3B%0A%20%20%20%20%20%20%20%20zero%20%3C%3D%20&#39;-&#39;%3B%0A%0A%20%20%20%20%20%20%20%20--%20This%20case%20uses%20ADD_SEL%20instead%20of%20C_ADD%2C%20etc.%0A%20%20%20%20%20%20%20%20case%20sel%20is%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20ADD_SEL%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%20%20%3A%3D%20signed(in0)%20%2B%20signed(in1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20std_logic_vector(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20update_flags(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20SUB_SEL%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20temp%20%20%20%3A%3D%20signed(in0)%20-%20signed(in1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20std_logic_vector(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20update_flags(temp)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20AND_SEL%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20in0%20and%20in1%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20OR_SEL%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3C%3D%20in0%20or%20in1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20others%20%3D%3E%20null%3B%0A%20%20%20%20%20%20%20%20end%20case%3B%0A%20%20%20%20end%20process%3B%0Aend%20arch1%3B%0A%0A------------------------------------------------------------------------%0A--%20Top%20level%20ALU%20entity%20used%20for%20synthesis%20and%20simulation.%0A%0Alibrary%20ieee%3B%0Ause%20ieee.std_logic_1164.all%3B%0Ause%20ieee.numeric_std.all%3B%0Ause%20work.alu_pkg.all%3B%0A%0Aentity%20alu%20is%0A%20%20%20%20generic%20(%0A%20%20%20%20%20%20%20%20WIDTH%20%3A%20positive%20%3A%3D%208)%3B%0A%20%20%20%20port%20(%0A%20%20%20%20%20%20%20%20in0%20%20%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20in1%20%20%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20sel%20%20%20%20%3A%20in%20%20std_logic_vector(1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20neg%20%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20pos%20%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20zero%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20output%20%3A%20out%20std_logic_vector(WIDTH-1%20downto%200))%3B%0Aend%20alu%3B%0A%0Aarchitecture%20default_arch%20of%20alu%20is%0A%0A%20%20%20%20signal%20alu_sel%20%3A%20alu_sel_t%3B%0Abegin%0A%0A%20%20%20%20--%20INSTRUCTIONS%3A%20uncomment%20the%20architecture%20and%2For%20entity%20that%20you%20want%0A%20%20%20%20--%20to%20evaluate.%0A%20%20%20%20%0A%20%20%20%20--U_ALU%20%3A%20entity%20work.alu1(bad)%0A%20%20%20%20%20%20%20%20U_ALU%20%3A%20entity%20work.alu1(arch1)%0A%20%20%20%20%20%20%20%20--U_ALU%20%3A%20entity%20work.alu1(arch2)%0A%20%20%20%20%20%20%20%20--U_ALU%20%3A%20entity%20work.alu1(arch3)%0A%20%20%20%20%20%20%20%20--U_ALU%20%3A%20entity%20work.alu1(arch4)%0A%20%20%20%20%20%20%20%20generic%20map%20(WIDTH%20%3D%3E%20WIDTH)%0A%20%20%20%20%20%20%20%20port%20map%20(in0%20%20%20%20%3D%3E%20in0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20in1%20%20%20%20%3D%3E%20in1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sel%20%20%20%20%3D%3E%20sel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%20%20%3D%3E%20neg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%20%20%3D%3E%20pos%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zero%20%20%20%3D%3E%20zero%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3D%3E%20output)%3B%0A%0A%20%20%20%20%20---------------------------------------------------------%0A%20%20%20%20%20--%20Uncomment%20everything%20below%20if%20using%20the%20alu2%20entity.%20Make%20sure%20to%0A%20%20%20%20%20--%20comment%20out%20everything%20above%20also.%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20--alu_sel%20%3C%3D%20ADD_SEL%20when%20sel%20%3D%20ADD_SEL&#39;encoding%20else%0A%20%20%20%20--%20%20%20%20%20%20%20%20%20%20%20SUB_SEL%20when%20sel%20%3D%20SUB_SEL&#39;encoding%20else%0A%20%20%20%20--%20%20%20%20%20%20%20%20%20%20%20AND_SEL%20when%20sel%20%3D%20AND_SEL&#39;encoding%20else%0A%20%20%20%20--%20%20%20%20%20%20%20%20%20%20%20OR_SEL%3B%0A%20%20%20%20%0A%20%20%20%20--U_ALU%20%3A%20entity%20work.alu2(arch1)%0A%20%20%20%20--%20%20%20%20generic%20map%20(WIDTH%20%3D%3E%20WIDTH)%0A%20%20%20%20--%20%20%20%20port%20map%20(in0%20%20%20%20%3D%3E%20in0%2C%0A%20%20%20%20--%20%20%20%20%20%20%20%20%20%20%20%20%20%20in1%20%20%20%20%3D%3E%20in1%2C%0A%20%20%20%20--%20%20%20%20%20%20%20%20%20%20%20%20%20%20sel%20%20%20%20%3D%3E%20alu_sel%2C%0A%20%20%20%20--%20%20%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%20%20%3D%3E%20neg%2C%0A%20%20%20%20--%20%20%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%20%20%3D%3E%20pos%2C%0A%20%20%20%20--%20%20%20%20%20%20%20%20%20%20%20%20%20%20zero%20%20%20%3D%3E%20zero%2C%0A%20%20%20%20--%20%20%20%20%20%20%20%20%20%20%20%20%20%20output%20%3D%3E%20output)%3B%0A%0A%20%20%20%20%0Aend%20default_arch%3B%0A" style="text-decoration:none !important;" download="alu.vhd"><code style="border:1px solid var(--vp-c-brand-darker);color:var(--vp-c-brand-darker);padding:0.4em 0.8em;margin:0 0.8em 0.4em 0;">alu.vhd</code></a><a href="data:text/plain;charset=utf-8,--%20Greg%20Stitt%0A--%20University%20of%20Florida%0A--%0A--%20This%20package%20defines%20constants%20and%20attributes%20that%20assist%20the%20ALU%20entities%0A--%20in%20alu.vhd.%0A%0Alibrary%20ieee%3B%0Ause%20ieee.std_logic_1164.all%3B%0Ause%20ieee.numeric_std.all%3B%0Ause%20ieee.math_real.all%3B%0A%0Apackage%20alu_pkg%20is%0A%20%20%20%20--%20Create%20an%20enumerated%20type%20for%20the%20ALU%20select%20so%20that%20we%20can%20see%0A%20%20%20%20--%20the%20names%20in%20the%20simulation%20instead%20of%20binary%20values.%20The%20_SEL%20suffix%0A%20%20%20%20--%20isn&#39;t%20really%20necessary%20because%20custom%20types%20have%20their%20own%20namespace%2C%0A%20%20%20%20--%20but%20in%20this%20case%20and%20and%20or%20would%20conflict%20with%20VHDL%20keywords.%0A%20%20%20%20type%20alu_sel_t%20is%20(ADD_SEL%2C%20SUB_SEL%2C%20AND_SEL%2C%20OR_SEL)%3B%0A%0A%20%20%20%20--%20enum_encoding%20is%20a%20synthesis%20attribute%20defined%20by%20the%20IEEE%20standard%0A%20%20%20%20--%20to%20control%20the%20encoding%20of%20enumerated%20types.%20You%20only%20need%20this%20if%20you%0A%20%20%20%20--%20want%20the%20enumeration%20to%20use%20specific%20values.%20In%20many%20cases%2C%20it%20is%20best%0A%20%20%20%20--%20to%20leave%20these%20values%20to%20the%20synthesis%20tool%20to%20increase%20optimization%0A%20%20%20%20--%20potential.%0A%20%20%20%20--%0A%20%20%20%20--%20WARNINGS%3A%20Use%20this%20with%20caution.%20Although%20a%20synthesis%20tool%20is%20supposed%0A%20%20%20%20--%20to%20use%20this%20encoding%2C%20there%20is%20a%20decent%20chance%20some%20tools%20will%20ignore%20it.%0A%20%20%20%20--%20If%20you%20have%20logic%20that%20is%20based%20on%20a%20specific%20encoding%2C%20it%20might%20not%0A%20%20%20%20--%20work%20in%20all%20tools.%20In%20addition%2C%20it%20will%20very%20likely%20result%20in%20differences%0A%20%20%20%20--%20between%20simulation%20and%20synthesis%20because%20the%20simulator%20will%20not%20use%20this%0A%20%20%20%20--%20encoding.%0A%20%20%20%20--%0A%20%20%20%20--%20SUGGESTION%3A%20If%20you%20are%20going%20to%20use%20an%20enumerated%20type%2C%20either%3A%0A%20%20%20%20--%201)%20Don&#39;t%20specify%20the%20encoding%2C%20or%0A%20%20%20%20--%202)%20Specify%20the%20encoding%2C%20but%20don&#39;t%20have%20any%20logic%20that%20requires%20that%0A%20%20%20%20--%20%20%20%20encoding%20for%20correct%20functionality.%20e.g.%20don&#39;t%20compare%20with%20a%0A%20%20%20%20--%20%20%20%20specific%20encoding%2C%20and%20don&#39;t%20assign%20a%20specific%20encoding%20to%20a%20signal.%0A%20%20%20%20--%20%20%20%20Only%20use%20the%20enumerated%20type.%0A%20%20%20%20attribute%20enum_encoding%20%3A%20string%3B%0A%20%20%20%20attribute%20enum_encoding%20of%20alu_sel_t%20%3A%20type%20is%20%2200%2001%2010%2011%22%3B%0A%0A%20%20%20%20--%20If%20you%20need%20to%20access%20the%20std_logic_vector%20encoding%20in%20code%2C%20you%20can%20use%0A%20%20%20%20--%20the%20following%20attribute%3A%0A%20%20%20%20%0A%20%20%20%20attribute%20encoding%20%3A%20std_logic_vector%3B%20%20%20%20%0A%20%20%20%20attribute%20encoding%20of%20ADD_SEL%20%3A%20literal%20is%20%2200%22%3B%0A%20%20%20%20attribute%20encoding%20of%20SUB_SEL%20%3A%20literal%20is%20%2201%22%3B%0A%20%20%20%20attribute%20encoding%20of%20AND_SEL%20%3A%20literal%20is%20%2210%22%3B%0A%20%20%20%20attribute%20encoding%20of%20OR_SEL%20%3A%20literal%20is%20%2211%22%3B%0A%0A%20%20%20%20--%20For%20example%2C%20you%20could%20do%20something%20like%20this%3A%0A%20%20%20%20--%0A%20%20%20%20--%20signal%20sel%20%3A%20std_logic_vector(1%20downto%200)%3B%0A%20%20%20%20--%20...%0A%20%20%20%20--%20sel%20%3C%3D%20ADD_SEL&#39;encoding%3B%0A%20%20%20%20--%0A%20%20%20%20--%20Unfortunately%2C%20I%20don&#39;t%20know%20of%20an%20elegant%20way%20to%20directly%20access%20the%0A%20%20%20%20--%20enum_encoding%2C%20so%20be%20extra%20careful%20to%20ensure%20that%20the%0A%20%20%20%20--%20encodings%20in%20the%20custom%20attribute%20match%20the%20encodings%20in%20enum_encoding.%0A%20%20%20%20--%0A%20%20%20%20--%20This%20code%20also%20comes%20with%20the%20annoyance%20that%20synthesis%20tools%20will%20report%0A%20%20%20%20--%20this%20as%20a%20unrecognized%20syntheis%20attribute%20warning.%20Unfortunately%20VHDL%0A%20%20%20%20--%20does%20not%20have%20a%20way%20of%20distinguishing%20between%20synthesis%20attributes%0A%20%20%20%20--%20and%20custom%20attributes.%0A%0A%20%20%20%20--%20IMPORTANT%3A%20although%20this%20encoding%20attribute%20gives%20you%20a%20way%20of%20assigning%0A%20%20%20%20--%20alu_sel_t%20to%20a%20std_logic_vector%2C%20I%20do%20not%20know%20of%20a%20way%20of%20assigning%20a%0A%20%20%20%20--%20std_logic_vector%20to%20alu_sel_t.%20If%20required%2C%20you%20would%20probably%20have%20to%20do%0A%20%20%20%20--%20something%20like%20this%3A%0A%20%20%20%20--%0A%20%20%20%20--%20sel%20%3C%3D%20ADD_SEL%20when%20val%20%3D%20ADD_SEL&#39;encoding%20else%0A%20%20%20%20--%20%20%20%20%20%20%20%20SUB_SEL%20when%20val%20%3D%20SUB_SEL&#39;encoding%20else%0A%20%20%20%20--%20etc.%0A%20%20%20%20--%0A%20%20%20%20--%20Again%2C%20use%20this%20strategy%20at%20your%20own%20risk%20because%20synthesis%20tools%20can%0A%20%20%20%20--%20ignore%20the%20requested%20encoding.%0A%20%20%20%20%20%20%20%20%0Aend%20package%3B%0A" style="text-decoration:none !important;" download="alu_pkg.vhd"><code style="border:1px solid var(--vp-c-brand-darker);color:var(--vp-c-brand-darker);padding:0.4em 0.8em;margin:0 0.8em 0.4em 0;">alu_pkg.vhd</code></a><a href="data:text/plain;charset=utf-8,--%20Greg%20Stitt%0A--%20University%20of%20Florida%0A%0Alibrary%20ieee%3B%0Ause%20ieee.std_logic_1164.all%3B%0Ause%20ieee.numeric_std.all%3B%0A%0Aentity%20alu_tb%20is%0Aend%20alu_tb%3B%0A%0Aarchitecture%20exhaustive%20of%20alu_tb%20is%0A%0A%20%20%20%20constant%20WIDTH%20%3A%20integer%20%3A%3D%208%3B%0A%0A%20%20%20%20signal%20in0%20%20%20%20%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20in1%20%20%20%20%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20signal%20sel%20%20%20%20%20%20%20%20%20%20%20%20%3A%20std_logic_vector(1%20downto%200)%3B%0A%20%20%20%20signal%20zero%2C%20pos%2C%20neg%20%3A%20std_logic%3B%0A%20%20%20%20signal%20output%20%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%0A%0A%20%20%20%20procedure%20reference_model%0A%20%20%20%20%20%20%20%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20in0%20%20%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20in1%20%20%20%20%3A%20in%20%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sel%20%20%20%20%3A%20in%20%20std_logic_vector(1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20zero%20%20%20%3A%20out%20std_logic%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20output%20%3A%20out%20std_logic_vector(WIDTH-1%20downto%200))%20is%0A%0A%20%20%20%20%20%20%20%20variable%20temp%20%3A%20signed(WIDTH-1%20downto%200)%3B%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20pos%20%20%3A%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20neg%20%20%3A%3D%20&#39;0&#39;%3B%0A%20%20%20%20%20%20%20%20zero%20%3A%3D%20&#39;0&#39;%3B%0A%0A%20%20%20%20%20%20%20%20case%20sel%20is%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2200%22%20%20%20%3D%3E%20temp%20%3A%3D%20signed(in0)%20%2B%20signed(in1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2201%22%20%20%20%3D%3E%20temp%20%3A%3D%20signed(in0)%20-%20signed(in1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2210%22%20%20%20%3D%3E%20temp%20%3A%3D%20signed(in0%20and%20in1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20%2211%22%20%20%20%3D%3E%20temp%20%3A%3D%20signed(in0%20or%20in1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20when%20others%20%3D%3E%20null%3B%0A%20%20%20%20%20%20%20%20end%20case%3B%0A%0A%20%20%20%20%20%20%20%20if%20(temp%20%3E%200)%20then%20pos%20%20%20%20%20%3A%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20elsif%20(temp%20%3D%200)%20then%20zero%20%3A%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20else%20neg%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%3D%20&#39;1&#39;%3B%0A%20%20%20%20%20%20%20%20end%20if%3B%0A%0A%20%20%20%20%20%20%20%20output%20%3A%3D%20std_logic_vector(temp)%3B%0A%20%20%20%20end%20procedure%3B%0A%0Abegin%20%20--%20TB%0A%0A%20%20%20%20UUT%20%3A%20entity%20work.alu%0A%20%20%20%20%20%20%20%20generic%20map%20(WIDTH%20%3D%3E%20WIDTH)%0A%20%20%20%20%20%20%20%20port%20map%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20in0%20%20%20%20%3D%3E%20in0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20in1%20%20%20%20%3D%3E%20in1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20sel%20%20%20%20%3D%3E%20sel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20neg%20%20%20%20%3D%3E%20neg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%20%20%20%20%3D%3E%20pos%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20zero%20%20%20%3D%3E%20zero%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20output%20%3D%3E%20output)%3B%0A%0A%20%20%20%20process%0A%20%20%20%20%20%20%20%20variable%20output_correct%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20std_logic_vector(WIDTH-1%20downto%200)%3B%0A%20%20%20%20%20%20%20%20variable%20neg_correct%2C%20pos_correct%2C%20zero_correct%20%3A%20std_logic%3B%0A%20%20%20%20begin%0A%20%20%20%20%20%20%20%20for%20i%20in%200%20to%202**WIDTH-1%20loop%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20j%20in%200%20to%202**WIDTH-1%20loop%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20k%20in%200%20to%20(2**sel&#39;length)-1%20loop%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20in0%20%3C%3D%20std_logic_vector(to_unsigned(i%2C%20WIDTH))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20in1%20%3C%3D%20std_logic_vector(to_unsigned(j%2C%20WIDTH))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sel%20%3C%3D%20std_logic_vector(to_unsigned(k%2C%202))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wait%20for%2010%20ns%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20reference_model(in0%2C%20in1%2C%20sel%2C%20neg_correct%2C%20pos_correct%2C%20zero_correct%2C%20output_correct)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assert(output%20%3D%20output_correct)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assert(neg%20%3D%20neg_correct%20or%20sel%20%3D%20%2210%22%20or%20sel%20%3D%20%2211%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assert(pos%20%3D%20pos_correct%20or%20sel%20%3D%20%2210%22%20or%20sel%20%3D%20%2211%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assert(zero%20%3D%20zero_correct%20or%20sel%20%3D%20%2210%22%20or%20sel%20%3D%20%2211%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20loop%3B%20%20--k%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20end%20loop%3B%20%20--%20j%0A%20%20%20%20%20%20%20%20end%20loop%3B%20%20--%20i%0A%0A%20%20%20%20%20%20%20%20report%20%22Tests%20completed.%22%3B%0A%20%20%20%20%20%20%20%20wait%3B%0A%0A%20%20%20%20end%20process%3B%0A%0Aend%20exhaustive%3B%0A" style="text-decoration:none !important;" download="alu_tb.vhd"><code style="border:1px solid var(--vp-c-brand-darker);color:var(--vp-c-brand-darker);padding:0.4em 0.8em;margin:0 0.8em 0.4em 0;">alu_tb.vhd</code></a></div><div style="font-size:0.8em;font-weight:bold;margin-top:1em;"> If your browser displays the code as plain text, press <code style="font-size:inherit;">Ctrl/Cmd</code> + <code style="font-size:inherit;">S</code> to save it. </div></details><h2 id="brief" tabindex="-1">Brief <a class="header-anchor" href="#brief" aria-hidden="true">#</a></h2><ul><li><p>Introduces common problems with latches and strategies for avoiding latches.</p></li><li><p>Introduces constants, enumerated types, encodings of enumerated types, don&#39;t cares, procedures, and packages.</p></li></ul><h2 id="entity-alu1" tabindex="-1">Entity <code>alu1</code> <a class="header-anchor" href="#entity-alu1" aria-hidden="true">#</a></h2><p>In this example, we look at various constructs that can be used to create an ALU. One of the most important takeaway points is to avoid latches by ensuring that all outputs are defined on all paths through a process.</p><p>Like the other examples, there are different architectures and entities, along with the top-level alu entity at the bottom of the file, which can be change to synthesize or simulate each implementation.</p><p>NOTE: Simulation of some of these implemenations may result in warnings similar to the following:</p><p>Warning: NUMERIC_STD.&quot;&gt;&quot;: metavalue detected, returning FALSE</p><h1 id="time-0-ns-iteration-0-instance-alu-tb-uut-u-alu" tabindex="-1">Time: 0 ns Iteration: 0 Instance: /alu_tb/UUT/U_ALU <a class="header-anchor" href="#time-0-ns-iteration-0-instance-alu-tb-uut-u-alu" aria-hidden="true">#</a></h1><p>A metavalue is anything other than &#39;1&#39; or &#39;0&#39; (e.g., &#39;X&#39;, &#39;-&#39;, &#39;U&#39;). As long as this happens at time 0, it can be ignored. It usually happens because a &#39;U&#39; reaches the input of an operator (in this case &gt;). It can also happen at other times, in which case you should verify that it is intended. Explicit use of don&#39;t cares can cause this warning, as is discussed in the example below.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">library</span><span style="color:#A6ACCD;"> ieee</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">use</span><span style="color:#A6ACCD;"> ieee</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">std_logic_1164</span><span style="color:#89DDFF;">.all;</span></span>
<span class="line"><span style="color:#89DDFF;">use</span><span style="color:#A6ACCD;"> ieee</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">numeric_std</span><span style="color:#89DDFF;">.all;</span></span>
<span class="line"></span></code></pre></div><p>Entity: alu1 ALU with generic width that does addition (sel = &quot;00&quot;), subtraction (sel=&quot;01&quot;), and (sel=&quot;10&quot;), or (sel=&quot;11&quot;). There are also status flags to signify positive, negative, and zero results. For illustrative purposes, assume the flags can be set to any value for the &quot;and&quot; and &quot;or&quot; cases.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">entity</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">generic</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">positive</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        in0    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        in1    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        sel    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        neg    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        pos    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        zero   </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="arch-bad-of-alu1" tabindex="-1">Arch <code>bad</code> of <a href="#entity-alu1"><code>alu1</code></a> <a class="header-anchor" href="#arch-bad-of-alu1" aria-hidden="true">#</a></h3><p>Although this architecture will simulate correctly, there is a synthesis problem. Note that the status flags are not defined by the &quot;and&quot; or &quot;or&quot; cases because the ALU&#39;s flags do not have meaning for these operations. However, we are describing combinational logic. What happens to the flags if the &quot;and&quot; or &quot;or&quot; cases are selected according to this code? The answer is that flags preserve their previous values. Using combinational logic, how can you preserve a value? In general, you can&#39;t, which is the purpose of sequential logic. So, what ends up happening is that the synthesis tool will infer latches because there is no clock signal to create a register. Although this could technically still work, your resulting circuit is not what was intended and wastes resources. In addition, latches can cause many timing problems unless you know how to properly use them. They are especially problematic in FPGAs because there are no latches, so the synthesis tools must imitate their behavior. In general, you sohuld always avoid latches in combinational logic. If you intentionally want a latch somewhere, design your circuit first with the latch, then write the code for it. For FPGA designs, latches should almost always be avoided, unless you have a very good reason to use them.</p><p>To solve this problem, every path through the process has to define each output and signal. If <em>any</em> path exists that does not define an output, that output will be inferred as a latch. In this example, the paths through the &quot;and&quot; and &quot;or&quot; cases do not define the flag outputs, and therefore result in latches.</p><p>SYNTHESIS GUIDELINE 2 FOR COMBINATIONAL LOGIC: Make sure that every path through the process defines every output and internal signal.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Remember to use combinational synthesis guideline 1 (put all inputs in</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- sensitivity list)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;00&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;">-- Must cast in0 and in1 to either signed because</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;">-- addition is not defined for std_logic_vector when using</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;">-- ieee.numeric_std  </span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;">-- Set the flags.</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">                    pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">elsif</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">                    pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">                    pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;01&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;">-- Same thing except using subtraction.</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">                    pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">elsif</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">                    pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">                    pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;10&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;">-- Doesn&#39;t define flags (causes latches on each flag)</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0 </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;11&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;">-- Doesn&#39;t define flags (causes latch on each flag)</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0 </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">case;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bad</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="arch-arch1-of-alu1" tabindex="-1">Arch <code>arch1</code> of <a href="#entity-alu1"><code>alu1</code></a> <a class="header-anchor" href="#arch-arch1-of-alu1" aria-hidden="true">#</a></h3><p>This architecture demonstrates one possible way of fixing the latch issue.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">arch1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#89DDFF;">begin</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- arch1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;00&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;01&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;10&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0 </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;11&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0 </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">case;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- By moving the flag definitions outside of the case statement, we</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- guarantee that all the flags are defined by all paths.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">            pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">arch1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="arch-arch2-of-alu1" tabindex="-1">Arch <code>arch2</code> of <a href="#entity-alu1"><code>alu1</code></a> <a class="header-anchor" href="#arch-arch2-of-alu1" aria-hidden="true">#</a></h3><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">arch2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#89DDFF;">begin</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- arch2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- Another option that I recommend in most cases is to assign default</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- values to each output at the beginning of the process. Then, if</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- you need to update the value later, you still can because these</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- are sequential statements. We aren&#39;t assigning a default</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- value to the output signal, but we certainly can. In fact, if the</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- ALU didn&#39;t support all possible select combinations, we could do that</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- to avoid a latch on the output.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- This strategy requires less code, tends to be less error prone, and</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- guarantees you won&#39;t have latches on the signals with default values.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- Use it whenever you can.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- Note that this approach doesn&#39;t work with concurrent assignements.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- Multiple concurrent assignments to the same signal creates multiple</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- drivers, which will result in synthesis errors. I haven&#39;t looked</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- into the exact simulation semantics of multiple drivers, but in</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- Modelsim, you will get undefined values from multiple drivers.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;00&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;01&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;10&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0 </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;11&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0 </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">case;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- This code is simpler now that we have default values of &#39;0&#39;.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            pos </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">            zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">            neg </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">arch2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="arch-arch3-of-alu1" tabindex="-1">Arch <code>arch3</code> of <a href="#entity-alu1"><code>alu1</code></a> <a class="header-anchor" href="#arch-arch3-of-alu1" aria-hidden="true">#</a></h3><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">arch3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- We can use constants to make the case statements more readable, which</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- would be very useful for a large number of ALU operations.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">constant</span><span style="color:#A6ACCD;"> C_ADD </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;00&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">constant</span><span style="color:#A6ACCD;"> C_SUB </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;01&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">constant</span><span style="color:#A6ACCD;"> C_AND </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;10&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">constant</span><span style="color:#A6ACCD;"> C_OR  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;11&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">begin</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- arch3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- Here we use a procedure (similar to a function call) to perform</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- the repeated functionality of setting the output flags.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">procedure</span><span style="color:#A6ACCD;"> update_flags</span><span style="color:#89DDFF;">(variable</span><span style="color:#A6ACCD;"> result </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">            pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">result </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span><span style="color:#A6ACCD;"> pos     </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">elsif</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span><span style="color:#A6ACCD;"> zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> neg                     </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> update_flags</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- If we really don&#39;t care what happens for the and and or operations,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- we can make the default an actual don&#39;t care &#39;-&#39;, which might give</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- the synthesis tool the ability to do extra logic minimization.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- In general, I avoid assigning don&#39;t cares unless I am specifically</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- trying to optimize an entity because don&#39;t care values reaching</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- arithmetic operators can cause a huge number of simulation warnings.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- Another option would be to add a boolean generic that specifies</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- whether or not to use don&#39;t cares so that you can turn it off for</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- simulations.</span></span>
<span class="line"><span style="color:#A6ACCD;">        pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;-&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;-&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;-&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> C_ADD </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp   </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                update_flags</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> C_SUB </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp   </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                update_flags</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> C_AND </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in0 </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> C_OR </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in0 </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">case;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">arch3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="arch-arch4-of-alu1" tabindex="-1">Arch <code>arch4</code> of <a href="#entity-alu1"><code>alu1</code></a> <a class="header-anchor" href="#arch-arch4-of-alu1" aria-hidden="true">#</a></h3><p>One disadvantage to using constants for the select is that the simulation will show the values of the select. Although that isn&#39;t a problem with just 4 selects, it would be confusing for 16+ select values. Ideally, we could see the name of the constant so we don&#39;t have to remember the encoded value.</p><p>This goal can be achieved via enumerated types. The following architecture isn&#39;t a great way of doing this, and instead just illustrates how it could be done for this entity. The following entity shows a more elegant way of accomplishing this goal.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">arch4</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">constant</span><span style="color:#A6ACCD;"> C_ADD </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;00&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">constant</span><span style="color:#A6ACCD;"> C_SUB </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;01&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">constant</span><span style="color:#A6ACCD;"> C_AND </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;10&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">constant</span><span style="color:#A6ACCD;"> C_OR  </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;11&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Create an enumerated type for the select values.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu_sel_t</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ADD_SEL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> SUB_SEL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> AND_SEL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> OR_SEL</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Create a new select signal using that type.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> alu_sel </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> alu_sel_t</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">begin</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- arch4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- We have to manually convert between std_logic_vector and alu_sel_t.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- You would probably never write ALU code this way, but if you need</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- to do this conversion, this is how to do it.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    alu_sel </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> ADD_SEL </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> C_ADD </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">               SUB_SEL </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> C_SUB </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">               AND_SEL </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> C_AND </span><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">               OR_SEL</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- We now use the alu_sel in the sensitivity list instead of sel.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> alu_sel</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">procedure</span><span style="color:#A6ACCD;"> update_flags</span><span style="color:#89DDFF;">(variable</span><span style="color:#A6ACCD;"> result </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">            pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">result </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span><span style="color:#A6ACCD;"> pos     </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">elsif</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span><span style="color:#A6ACCD;"> zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> neg                     </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> update_flags</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;-&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;-&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;-&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- In this updated case, we use the enumerated type names, which will</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- show up in simulation.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> alu_sel </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> ADD_SEL </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp   </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                update_flags</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> SUB_SEL </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp   </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                update_flags</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> AND_SEL </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in0 </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> OR_SEL </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in0 </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">case;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- Another alternative we could have done would be to leave the previous</span></span>
<span class="line"><span style="color:#676E95;">-- process using sel instead of alu_sel. In this case, we can see the names</span></span>
<span class="line"><span style="color:#676E95;">-- of the select values by adding alu_sel to the waveform, while using the</span></span>
<span class="line"><span style="color:#676E95;">-- sel signal in the case statement. However, that approach would likely</span></span>
<span class="line"><span style="color:#676E95;">-- lead to synthesis warnings because alu_sel has no impact on any outputs.</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">arch4</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="entity-alu2" tabindex="-1">Entity <code>alu2</code> <a class="header-anchor" href="#entity-alu2" aria-hidden="true">#</a></h2><p>The following alu2 entity illustrates a more elegant approach to achieving select values that are named in simulation. It also demonstrates how to use a package.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">library</span><span style="color:#A6ACCD;"> ieee</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">use</span><span style="color:#A6ACCD;"> ieee</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">std_logic_1164</span><span style="color:#89DDFF;">.all;</span></span>
<span class="line"><span style="color:#89DDFF;">use</span><span style="color:#A6ACCD;"> ieee</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">numeric_std</span><span style="color:#89DDFF;">.all;</span></span>
<span class="line"></span></code></pre></div><p>See alu_pkg.vhd for the contents of the package. Basically, the package defines the alu_sel_t type so that we can use it in the port.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">entity</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">generic</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">positive</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        in0    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        in1    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- Since we defined alu_sel_t in alu_pkg, we can use a custom type</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- in the port of this entity.</span></span>
<span class="line"><span style="color:#A6ACCD;">        sel    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  alu_sel_t</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        neg    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        pos    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        zero   </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="arch-arch1-of-alu2" tabindex="-1">Arch <code>arch1</code> of <a href="#entity-alu2"><code>alu2</code></a> <a class="header-anchor" href="#arch-arch1-of-alu2" aria-hidden="true">#</a></h3><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">arch1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Since we made sel use the alu_sel_t, we don&#39;t have to change anything</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- here other than the names of the constants.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">procedure</span><span style="color:#A6ACCD;"> update_flags</span><span style="color:#89DDFF;">(variable</span><span style="color:#A6ACCD;"> result </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">            pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">result </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span><span style="color:#A6ACCD;"> pos     </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">elsif</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span><span style="color:#A6ACCD;"> zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> neg                     </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> update_flags</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        pos  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;-&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        neg  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;-&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        zero </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;-&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">-- This case uses ADD_SEL instead of C_ADD, etc.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> ADD_SEL </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp   </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                update_flags</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> SUB_SEL </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                temp   </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                update_flags</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> AND_SEL </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in0 </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> OR_SEL </span><span style="color:#89DDFF;">=&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> in0 </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">case;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">arch1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="entity-alu" tabindex="-1">Entity <code>alu</code> <a class="header-anchor" href="#entity-alu" aria-hidden="true">#</a></h2><p>Top level ALU entity used for synthesis and simulation.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">entity</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">generic</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">positive</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        in0    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        in1    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        sel    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        neg    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        pos    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        zero   </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="arch-default-arch-of-alu" tabindex="-1">Arch <code>default_arch</code> of <a href="#entity-alu"><code>alu</code></a> <a class="header-anchor" href="#arch-default-arch-of-alu" aria-hidden="true">#</a></h3><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">default_arch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> alu_sel </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> alu_sel_t</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">begin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- INSTRUCTIONS: uncomment the architecture and/or entity that you want</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- to evaluate.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--U_ALU : entity work.alu1(bad)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">U_ALU</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">entity</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">work</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">alu1</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">arch1</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_ALU : entity work.alu1(arch2)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_ALU : entity work.alu1(arch3)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;">--U_ALU : entity work.alu1(arch4)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">generic</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0    </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> in0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                  in1    </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                  sel    </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                  neg    </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> neg</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                  pos    </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> pos</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                  zero   </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> zero</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">output</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;">---------------------------------------------------------</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;">-- Uncomment everything below if using the alu2 entity. Make sure to</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;">-- comment out everything above also.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--alu_sel &lt;= ADD_SEL when sel = ADD_SEL&#39;encoding else</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--           SUB_SEL when sel = SUB_SEL&#39;encoding else</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--           AND_SEL when sel = AND_SEL&#39;encoding else</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--           OR_SEL;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--U_ALU : entity work.alu2(arch1)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--    generic map (WIDTH =&gt; WIDTH)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--    port map (in0    =&gt; in0,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--              in1    =&gt; in1,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--              sel    =&gt; alu_sel,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--              neg    =&gt; neg,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--              pos    =&gt; pos,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--              zero   =&gt; zero,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--              output =&gt; output);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">default_arch</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="package-alu-pkg" tabindex="-1">Package <code>alu_pkg</code> <a class="header-anchor" href="#package-alu-pkg" aria-hidden="true">#</a></h2><p>This package defines constants and attributes that assist the ALU entities in alu.vhd.</p><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu_pkg</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Create an enumerated type for the ALU select so that we can see</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- the names in the simulation instead of binary values. The _SEL suffix</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- isn&#39;t really necessary because custom types have their own namespace,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- but in this case and and or would conflict with VHDL keywords.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu_sel_t</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ADD_SEL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> SUB_SEL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> AND_SEL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> OR_SEL</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- enum_encoding is a synthesis attribute defined by the IEEE standard</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- to control the encoding of enumerated types. You only need this if you</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- want the enumeration to use specific values. In many cases, it is best</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- to leave these values to the synthesis tool to increase optimization</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- potential.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- WARNINGS: Use this with caution. Although a synthesis tool is supposed</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- to use this encoding, there is a decent chance some tools will ignore it.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- If you have logic that is based on a specific encoding, it might not</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- work in all tools. In addition, it will very likely result in differences</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- between simulation and synthesis because the simulator will not use this</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- encoding.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- SUGGESTION: If you are going to use an enumerated type, either:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- 1) Don&#39;t specify the encoding, or</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- 2) Specify the encoding, but don&#39;t have any logic that requires that</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--    encoding for correct functionality. e.g. don&#39;t compare with a</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--    specific encoding, and don&#39;t assign a specific encoding to a signal.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--    Only use the enumerated type.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">attribute</span><span style="color:#A6ACCD;"> enum_encoding </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">attribute</span><span style="color:#A6ACCD;"> enum_encoding </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> alu_sel_t </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">&quot;00 01 10 11&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- If you need to access the std_logic_vector encoding in code, you can use</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- the following attribute:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">attribute</span><span style="color:#A6ACCD;"> encoding </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">attribute</span><span style="color:#A6ACCD;"> encoding </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> ADD_SEL </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">literal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;00&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">attribute</span><span style="color:#A6ACCD;"> encoding </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> SUB_SEL </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">literal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;01&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">attribute</span><span style="color:#A6ACCD;"> encoding </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> AND_SEL </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">literal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;10&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">attribute</span><span style="color:#A6ACCD;"> encoding </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> OR_SEL </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">literal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;11&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- For example, you could do something like this:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- signal sel : std_logic_vector(1 downto 0);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- ...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- sel &lt;= ADD_SEL&#39;encoding;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Unfortunately, I don&#39;t know of an elegant way to directly access the</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- enum_encoding, so be extra careful to ensure that the</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- encodings in the custom attribute match the encodings in enum_encoding.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- This code also comes with the annoyance that synthesis tools will report</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- this as a unrecognized syntheis attribute warning. Unfortunately VHDL</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- does not have a way of distinguishing between synthesis attributes</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- and custom attributes.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- IMPORTANT: although this encoding attribute gives you a way of assigning</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- alu_sel_t to a std_logic_vector, I do not know of a way of assigning a</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- std_logic_vector to alu_sel_t. If required, you would probably have to do</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- something like this:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- sel &lt;= ADD_SEL when val = ADD_SEL&#39;encoding else</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--        SUB_SEL when val = SUB_SEL&#39;encoding else</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- etc.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- Again, use this strategy at your own risk because synthesis tools can</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- ignore the requested encoding.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">package;</span></span>
<span class="line"></span></code></pre></div><h2 id="entity-alu-tb" tabindex="-1">Entity <code>alu_tb</code> <a class="header-anchor" href="#entity-alu-tb" aria-hidden="true">#</a></h2><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">entity</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu_tb</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu_tb</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="arch-exhaustive-of-alu-tb" tabindex="-1">Arch <code>exhaustive</code> of <a href="#entity-alu-tb"><code>alu_tb</code></a> <a class="header-anchor" href="#arch-exhaustive-of-alu-tb" aria-hidden="true">#</a></h3><div class="language-vhdl"><button class="copy"></button><span class="lang">vhdl</span><pre><code><span class="line"><span style="color:#89DDFF;">architecture</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">exhaustive</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alu_tb</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">constant</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">integer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in0            </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> in1            </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> sel            </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> zero</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> pos</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> neg </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">signal</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">procedure</span><span style="color:#A6ACCD;"> reference_model</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">            in0    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            sel    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            neg    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            pos    </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            zero   </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        pos  </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        neg  </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        zero </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;0&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">case</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">is</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;00&quot;</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;01&quot;</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;10&quot;</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0 </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;11&quot;</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> temp </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">signed</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0 </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">others</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> case</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span><span style="color:#A6ACCD;"> pos     </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elsif</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span><span style="color:#A6ACCD;"> zero </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> neg                   </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&#39;1&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">temp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">procedure;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">begin</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- TB</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    UUT </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">entity</span><span style="color:#A6ACCD;"> work</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">alu</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">generic</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">            in0    </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> in0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            in1    </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            sel    </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            neg    </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> neg</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            pos    </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> pos</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            zero   </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> zero</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">output</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">process</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> output_correct                         </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">downto</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">variable</span><span style="color:#A6ACCD;"> neg_correct</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> pos_correct</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> zero_correct </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">**</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">loop</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> j </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">**</span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">loop</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> k </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">sel</span><span style="color:#89DDFF;">&#39;length)-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">loop</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span></span>
<span class="line"><span style="color:#A6ACCD;">                    in0 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">to_unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">                    in1 </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">to_unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">j</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WIDTH</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">                    sel </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">std_logic_vector</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">to_unsigned</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">k</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">wait</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ns</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                    reference_model</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">in0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> in1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> sel</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> neg_correct</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> pos_correct</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> zero_correct</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> output_correct</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">assert(</span><span style="color:#FFCB6B;">output</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> output_correct</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">assert(</span><span style="color:#A6ACCD;">neg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> neg_correct </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;10&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;11&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">assert(</span><span style="color:#A6ACCD;">pos </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> pos_correct </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;10&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;11&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">assert(</span><span style="color:#A6ACCD;">zero </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> zero_correct </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;10&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> sel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">&quot;11&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">loop;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">--k                </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">loop;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- j</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">loop;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- i</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">report</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">&quot;Tests completed.&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">wait;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">process;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">end</span><span style="color:#A6ACCD;"> exhaustive</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div>`,49),e=[p];function t(c,r,D,A,C,y){return a(),n("div",null,e)}const u=s(o,[["render",t]]);export{i as __pageData,u as default};
